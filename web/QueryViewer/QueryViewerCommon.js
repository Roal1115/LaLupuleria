function IsQueryObjectPreview(){return void 0!=window.external&&void 0!=window.external.SendText}function IsDashboardEdit(){return"undefined"!==typeof UCDashboardForEditor}function UpdateQueryObjectPreview(a){for(var c=Object.keys(qv.collection)[0],c=qv.collection[c],a=JSON.parse(a),d=Object.keys(a),b=0;b<d.length;b++){var f=d[b];c[f]=a[f]}c.realShow()}var qv={collection:{}};
qv.util={color:{getHtmlColor:function(a){return"string"==typeof a||"number"==typeof a?gx.color.toHex?-1==a?"":"#"+gx.color.toHex(a):"#"+gxToHex(a):void 0==a?"#000000":a.Html},parseCSSColor:function(a){return"rgb"==a.substring(0,3)?(a=a.replace("rgb","").replace("(","").replace(")","").split(","),this.getHtmlColor(gx.color.rgb(parseInt(a[0]),parseInt(a[1]),parseInt(a[2])))):a},convertValueToColor:function(a){a=-1==a.indexOf("#")?"#"+a:a;for(a=a.substring(1,a.length);6>a.length;)a="0"+a;return"#"+a}},
css:function(){var a={};return{replaceCssClasses:function(c){for(;0<=(posIni=c.indexOf("gxpl_cssReplace("));){posFin=c.indexOf(")",posIni);className=c.substring(posIni+16,posFin);var d=className;if(void 0!=a[d])style=a[d];else{for(var b=d,f=void 0,p=gx.theme+".css",m=!1,h=void 0,l=0;l<document.styleSheets.length;l++)if(null!=document.styleSheets[l].href&&0<=document.styleSheets[l].href.indexOf(p)){m=!0;f=document.styleSheets[l];break}m&&(f.cssRules?crossRules=f.cssRules:f.rules&&(crossRules=f.rules));
f=Number.MAX_SAFE_INTEGER;for(l=0;l<crossRules.length;l++)p=crossRules[l],void 0!=p.selectorText&&(0==p.selectorText.toLowerCase().indexOf("."+b.toLowerCase())&&p.selectorText.length<f)&&(h=p.style,f=p.selectorText.length);styleObj=h;void 0!=styleObj?(b=styleObj,h="",""!=b.color&&(h+=(""==h?"":";")+"color:"+qv.util.color.parseCSSColor(b.color)),""!=b.backgroundColor&&(h+=(""==h?"":";")+"backgroundColor:"+qv.util.color.parseCSSColor(b.backgroundColor)),""!=b.borderStyle&&(h+=(""==h?"":";")+"borderStyle:"+
b.borderStyle),""!=b.borderWidth&&(h+=(""==h?"":";")+"borderThickness:"+b.borderWidth.replace("pt","").replace("px","")),""!=b.borderColor&&(h+=(""==h?"":";")+"borderColor:"+qv.util.color.parseCSSColor(b.borderColor)),""!=b.fontFamily&&(h+=(""==h?"":";")+"fontFamily:"+b.fontFamily.replace(/"/g,"").replace(/'/g,"")),""!=b.fontSize&&(h+=(""==h?"":";")+"fontSize:"+b.fontSize.replace("pt","").replace("px","")),""!=b.fontWeight&&(h+=(""==h?"":";")+"fontWeight:"+b.fontWeight),""!=b.fontStyle&&(h+=(""==
h?"":";")+"fontStyle:"+b.fontStyle),""!=b.textDecoration&&(h+=(""==h?"":";")+"textDecoration:"+b.textDecoration),styleTransformed=h,style=a[d]=styleTransformed):style=""}toReplace=c.substring(posIni,posFin+1);c=c.replace(toReplace,style)}return c},parseStyle:function(a){var d="";if(""!=a&&void 0!=a){if(0>a.indexOf(":"))return a;for(var a=a.split(";"),b=0;b<a.length;b++)var f=a[b].split(":"),p=f[0],d=d+((""==d?"":",")+'"'+("borderThickness"==p?"borderWidth":p)+'":"'+f[1]+("borderThickness"==p||"fontSize"==
p?"px":"")+'"');return"{"+d+"}"}return"{}"}}}(),autorefresh:function(){return{UpdateLayoutSameGroup:function(a,c){function d(b,a,c){function q(b,a){function e(b,a,f){for(var q=0;q<b.length;q++){var c=b[q];if(c[a]==f)return c}return null}var f=e(b.Metadata.Axes,"Name",a);null==f&&(f=e(b.Metadata.Data,"Name",a));return f}function e(b,a){for(var e=null,f=0;f<b.Axes.length;f++)if(b.Axes[f].Name==a){e=b.Axes[f];break}return e}function g(b,a){void 0==a.Title&&(a.Title="");void 0==a.Aggregation&&(a.Aggregation=
"");void 0==a.AxisOrder&&(a.AxisOrder={Type:"None"});void 0==a.Format&&(a.Format={Subtotals:"Yes"});qv.util.MergeFields(a,b)}function d(b,a){for(var e=0;e<b.Metadata.Parameters.length;e++){var f=b.Metadata.Parameters[e];if(f.IsCollection&&f.Name==a)return[e,f]}return[null,null]}function p(b,a){for(var e=null,f=0;f<b.Parameters.length;f++)if(b.Parameters[f].Name==a){e=b.Parameters[f];break}return e}function y(b,a){for(var e="",f="I"==a.Type||"R"==a.Type||"B"==a.Type?"":'"',q=0;q<b.Filter.Values.length;q++)e+=
(""==e?"":",")+f+b.Filter.Values[q]+f;return"["+e+"]"}var A=[];b._parametersCloned||(b._parametersCloned=!0,b.Parameters=qv.util.cloneObject(b.Parameters));for(var t=qv.util.GetOrderedAxesKeys(f),D=0;D<t.length;D++){var x=parseInt(t[D].substr(5,4));sourceAxis=a[x];var H=d(b,sourceAxis.Name),x=H[0],H=H[1],z=q(b,sourceAxis.Name),k=null!=z,B=!k;k&&(k=e(b,sourceAxis.Name),null==k&&(k={},k.Name=sourceAxis.Name),"Table"==c&&"Table"!=b.RealType&&(sourceAxis.AxisType=qv.util.ToQueryViewerAxisType(z.AxisType)),
g(sourceAxis,k),A.push(k));B&&null!=H&&(H=y(sourceAxis,H),b.Object?(z=eval(b.Object),z[x+2]=H,b.Object=JSON.stringify(z)):(x=p(b,sourceAxis.Name),null==x&&(x={},x.Name=sourceAxis.Name,b.Parameters.push(x)),x.Value=H))}b.Axes=A}function b(b,a,f){d(b,a,f);b.RememberLayout=!1;b.AllowChangeAxesOrder=!0;qv.util.autorefresh.SaveAxesAndParametersState(b);b.realShow()}if(void 0!=a.AutoRefreshGroup&&null!=a.AutoRefreshGroup&&""!=a.AutoRefreshGroup&&""!=qv.util.trim(a.AutoRefreshGroup)){qv.util.autorefresh.DeleteAxesAndParametersState(a);
var f=qv.pivot.GetRuntimeMetadata(c,a.RealType),p=a.RealType;for(index in qv.collection)qViewerOther=qv.collection[index],qv.services.IsObjectSet(qViewerOther)&&(qViewerOther.userControlId()!=a.userControlId()&&a.AutoRefreshGroup==qViewerOther.AutoRefreshGroup)&&(qViewerOther._isAutorefresh=!0,void 0!=qViewerOther.Metadata&&void 0!=qViewerOther.Metadata.Parameters?b(qViewerOther,f,p):qViewerOther.getQueryParameters(function(a,c){var d=qv.util.dom.xmlDocument(a),d=qv.util.dom.getSingleElementByTagName(d,
"gxpl_ParameterCollection");void 0==c.Metadata&&(c.Metadata={});c.Metadata.Parameters=[];for(var d=qv.util.dom.getMultipleElementsByTagName(d,"gxpl_Parameter"),q=0;q<d.length;q++){var e={};e.Name=qv.util.dom.getValueNode(qv.util.dom.getSingleElementByTagName(d[q],"Name"));e.Type=qv.util.dom.getValueNode(qv.util.dom.getSingleElementByTagName(d[q],"Type"));e.IsCollection=gx.lang.gxBoolean(qv.util.dom.getValueNode(qv.util.dom.getSingleElementByTagName(d[q],"IsCollection")));c.Metadata.Parameters.push(e)}b(c,
f,p)}))}},LoadAxesAndParametersState:function(a){var c=window.location.pathname+"_"+a.userControlId()+"_"+a.ObjectId+"_"+a.ObjectName+"_",d=c+"Axes",c=qv.util.storage.getItem(c+"Parameters"),d=qv.util.storage.getItem(d);null!=c&&""!=c&&(a.Parameters=JSON.parse(c),a.RememberLayout=!1);null!=d&&""!=d&&(a.Axes=JSON.parse(d),a.RememberLayout=!1)},SaveAxesAndParametersState:function(a){var c=window.location.pathname+"_"+a.userControlId()+"_"+a.ObjectId+"_"+a.ObjectName+"_",d=c+"Axes";qv.util.storage.setItem(c+
"Parameters",JSON.stringify(a.Parameters));qv.util.storage.setItem(d,JSON.stringify(a.Axes))},DeleteAxesAndParametersState:function(a){var a=window.location.pathname+"_"+a.userControlId()+"_"+a.ObjectId+"_"+a.ObjectName+"_",c=a+"Axes";qv.util.storage.removeItem(a+"Parameters");qv.util.storage.removeItem(c)}}}(),dom:{getSingleElementByTagName:function(a,c){var d;d=this.getMultipleElementsByTagName(a,c);return 0<d.length?d[0]:null},getMultipleElementsByTagName:function(a,c){return!gx.util.browser.isIE()||
12<=gx.util.browser.ieVersion()?a.getElementsByTagName(c):a.selectNodes(c)},getValueNode:function(a){return null==a||void 0==a?null:null!=a.firstChild&&void 0!=a.firstChild?a.firstChild.nodeValue:null},selectXPathNode:function(a,c){var d;a.evaluate?(d=a.evaluate(c,a,null,XPathResult.ANY_TYPE,null),d=d.iterateNext()):(d=a.selectNodes(c),d=0<d.length?d[0]:null);return d},xmlDocument:function(a){var c;!gx.util.browser.isIE()||12<=gx.util.browser.ieVersion()?(parser=new DOMParser,c=parser.parseFromString(a,
"text/xml")):(c=new ActiveXObject("Microsoft.XMLDOM"),c.async="false",c.loadXML(a));return c},getEmptyContainer:function(a){for(a=a.getContainerControl();a.firstChild;)a.removeChild(a.firstChild);return a},setStyle:function(a,c){for(key in c)a.style[key]=c[key]},createText:function(a,c){var d=document.createTextNode(c);a.appendChild(d);return d},createElement:function(a,c,d,b,f,p,m){c=document.createElement(c);""!=d&&(c.id=d);""!=b&&(c.className=b);qv.util.dom.setStyle(c,f);"function"==typeof p&&
(c.onclick=p);""!=m&&qv.util.dom.createText(c,m);null!=a&&a.appendChild(c);return c},createTable:function(a,c,d){a=qv.util.dom.createElement(a,"TABLE","",c,d,null,"");c=document.createElement("TBODY");a.appendChild(c);return c},createRow:function(a){return qv.util.dom.createElement(a,"TR","","",{},null,"")},createCell:function(a,c,d,b,f){a=qv.util.dom.createElement(a,"TD","","",b,null,f);1!=c&&(a.colSpan=c);""!=d&&(a.align=d);return a},createSpan:function(a,c,d,b,f,p,m){a=qv.util.dom.createElement(a,
"SPAN",c,d,f,p,m);""!=b&&(a.title=b);return a},createDiv:function(a,c,d,b,f,p){a=qv.util.dom.createElement(a,"DIV",c,d,f,null,p);""!=b&&(a.title=b);return a},createAnchor:function(a,c,d,b){return qv.util.dom.createElement(a,"A",c,"",d,null,b)},createInput:function(a,c,d,b){a=qv.util.dom.createElement(a,"INPUT",c,"",b,null,"");""!=d&&(a.type=d);return a},createSelect:function(a,c){return qv.util.dom.createElement(a,"SELECT",c,"",{},null,"")},createOption:function(a,c,d,b){a=qv.util.dom.createElement(a,
"OPTION","","",{},null,b);""!=c&&(a.value=c);d&&(a.selected=!0);return a}},storage:function(){function a(a,d,b){if(b){var f=new Date;f.setTime(f.getTime()+864E5*b);b="; expires="+f.toGMTString()}else b="";document.cookie=a+"="+d+b+"; path=/"}return{setItem:function(c,d){localStorage?localStorage.setItem(c,d):a(c,d,365)},getItem:function(a){if(localStorage)return localStorage.getItem(a);a:{for(var a=a+"=",d=document.cookie.split(";"),b=0;b<d.length;b++){for(var f=d[b];" "==f.charAt(0);)f=f.substring(1,
f.length);if(0==f.indexOf(a)){a=f.substring(a.length,f.length);break a}}a=null}return a},removeItem:function(c){localStorage?localStorage.removeItem(c):a(c,"",-1)}}}(),ExecuteTracker:function(a,c){for(var d=[],b=0;b<gx.fx.ctx.trackers.length;b++)gx.fx.ctx.trackers[b].types[0]==a&&(d[d.length]=gx.fx.ctx.trackers[b]);for(b=0;b<d.length;b++){var f=gx.O;gx.O=d[b].obj;var p=gx.csv.cmpCtx;gx.csv.cmpCtx=d[b].obj.CmpContext;gx.evt.setProcessing(!1);d[b].hdl.call(d[b].obj,null,null,c);gx.O=f;gx.csv.cmpCtx=
p}},satisfyStyle:function(a,c){switch(c.Operator){case "EQ":return a==c.Value1;case "GT":return a>c.Value1;case "LT":return a<c.Value1;case "GE":return a>=c.Value1;case "LE":return a<=c.Value1;case "NE":return a!=c.Value1;case "IN":return a>=c.Value1&&a<=c.Value2}},isGeneXusPreview:function(){return IsQueryObjectPreview()},getGenerator:function(){return gx.gen.isDotNet()?"C#":gx.gen.isJava()?"Java":""},getErrorFromText:function(a){return'<Result OK="True"></Result>'==a?"":a.replace('<Result OK="False"><Dsc>',
"").replace("</Dsc></Result>","")},trim:function(a){return"string"!=typeof a?null:a.replace(/^[\s]+/,"").replace(/[\s]+$/,"").replace(/[\s]{2,}/," ")},capitalize:function(a){return a.charAt(0).toUpperCase()+a.slice(1)},decapitalize:function(a){return a.charAt(0).toLowerCase()+a.slice(1)},dateToString:function(a,c){var d=a.getStringWithFmt("Y4MD").replace(/\//g,"-");c&&(a.TimeFmt=24,d+=" "+a.getTimeString(!0,!0));return d},cloneObject:function(a){return JSON.parse(JSON.stringify(a))},endsWith:function(a,
c){return a.substr(a.length-c.length,c.length)==c},startsWith:function(a,c){return a.substr(0,c.length)==c},formatNumber:function(a,c,d,b){a=gx.num.formatNumber(a,c,d,0,!0,!1);if(b&&(0<=a.indexOf(".")||0<=a.indexOf(","))){for(;qv.util.endsWith(a,"0");)a=a.slice(0,-1);if(qv.util.endsWith(a,".")||qv.util.endsWith(a,","))a=a.slice(0,-1)}return a},formatDateTime:function(a,c,d,b,f,p,m){a=new gx.date.gxdate(a,"Y4MD");d=a.getStringWithFmt(d);"datetime"==c&&(a.TimeFmt=24,d+=" "+a.getTimeString(f,p,b,m));
return d},seconsdToText:function(a){return 60>a?qv.util.formatNumber(Math.round(a),0,"ZZZZZZZZZZZZZZ9",!1)+" "+qv.util.decapitalize(gx.getMessage("GXPL_QViewerSeconds")):3600>a?qv.util.formatNumber(Math.round(a/60),0,"ZZZZZZZZZZZZZZ9",!1)+" "+qv.util.decapitalize(gx.getMessage("GXPL_QViewerMinutes")):86400>a?qv.util.formatNumber(Math.round(a/60/60),0,"ZZZZZZZZZZZZZZ9",!1)+" "+qv.util.decapitalize(gx.getMessage("GXPL_QViewerHours")):2630016>a?qv.util.formatNumber(Math.round(a/60/60/24),0,"ZZZZZZZZZZZZZZ9",
!1)+" "+qv.util.decapitalize(gx.getMessage("GXPL_QViewerDays")):31557600>a?qv.util.formatNumber(Math.round(a/60/60/24/30.44),0,"ZZZZZZZZZZZZZZ9",!1)+" "+qv.util.decapitalize(gx.getMessage("GXPL_QViewerMonths")):qv.util.formatNumber(Math.round(a/60/60/24/365.25),0,"ZZZZZZZZZZZZZZ9",!1)+" "+qv.util.decapitalize(gx.getMessage("GXPL_QViewerYears"))},ParseNumericPicture:function(a,c){var d,b,f="",p="";if(""==c)d="integer"==a?0:2,b=!1;else{0>c.indexOf(".")&&0>c.indexOf(",")?(d=0,b=!1):0<=c.indexOf(".")&&
0>c.indexOf(",")?(d="integer"==a?0:c.length-c.indexOf(".")-1,b=!1):(d=0>c.indexOf(".")&&0<=c.indexOf(",")?0:"integer"==a?0:c.length-c.indexOf(".")-1,b=!0);for(var m=1,h=0;h<c.length;h++){var l=c.substr(h,1);if(("."==l||","==l||"9"==l||"Z"==l)&&1==m)m=2;"."!=l&&(","!=l&&"9"!=l&&"Z"!=l)&&2==m&&(m=3);switch(m){case 1:f+=l;break;case 3:p+=l}}}return{DecimalPrecision:d,UseThousandsSeparator:b,Prefix:f,Suffix:p}},ParseDateTimePicture:function(a,c){var d=gx.dateFormat,b="datetime"==a,f="datetime"==a,p="datetime"==
a,m="datetime"==a;""!=c&&(0<=c.indexOf("9999")&&0>d.indexOf("Y4")?d=d.replace("Y","Y4"):0>c.indexOf("9999")&&0<=d.indexOf("Y4")&&(d=d.replace("Y4","Y")),"datetime"==a&&(b=c.indexOf(" "),0<=b?(m=c.substr(b+1,c.length-b),b=2<=m.length,f=5<=m.length,p=8<=m.length,m=12==m.length):m=p=f=b=!1));return{DateFormat:d,IncludeHours:b,IncludeMinutes:f,IncludeSeconds:p,IncludeMilliseconds:m}},aggregate:function(a,c,d){var b=null,f=null,p=null,m=null;switch(a||"Sum"){case "Sum":for(a=0;a<c.length;a++)null!=c[a]&&
(b+=c[a]);return b;case "Average":for(a=0;a<c.length;a++)null!=c[a]&&(b+=c[a],f+=d[a]);return null!=b?b/f:null;case "Count":for(a=0;a<d.length;a++)f+=d[a];return f;case "Max":for(a=0;a<c.length;a++)m=null==m?c[a]:c[a]>m?c[a]:m;return m;case "Min":for(a=0;a<c.length;a++)p=null==p?c[a]:c[a]<p?c[a]:p;return p}},FromRuntimeMetadata:function(a,c,d){return"true"==a?"Hidden":!c?"Data":"rows"==d?"Row":"columns"==d?"Column":"Page"},ToQueryViewerAxisType:function(a){switch(a){case "Rows":return"Row";case "Columns":return"Column";
case "Pages":return"Page";case "Data":return"Data";case "Hidden":return"NotShow"}},anyError:function(a){return 0==a.indexOf('<Result OK="False"><Dsc>')},showActivityIndicator:function(a){var c='qv.util.showActivityIndicatorMain("'+a.getContainerControl().id+'");';a._fadeTimeout=setTimeout(c,500)},showActivityIndicatorMain:function(a){a=document.getElementById(a);gx.dom.addClass(a,"gx-qv-loading");for(var c=0;c<a.childNodes.length;c++)gx.dom.addClass(a.childNodes[c],"gx-qv-loading-children")},hideActivityIndicator:function(a){a._fadeTimeout&&
clearTimeout(a._fadeTimeout);a=a.getContainerControl();gx.dom.removeClass(a,"gx-qv-loading");for(var c=0;c<a.childNodes.length;c++)gx.dom.removeClass(a.childNodes[c],"gx-qv-loading-children")},renderError:function(a,c){if(IsQueryObjectPreview()&&!IsDashboardEdit())window.external.SendText(a.ControlName,c);else{var d=qv.util.dom.getEmptyContainer(a);qv.util.dom.createDiv(d,"","gx-qv-centered-text","",{width:gx.dom.addUnits(a.Width),height:gx.dom.addUnits(a.Height),borderColor:"silver",borderWidth:"thin",
borderStyle:"solid"},gx.getMessage("GXPL_QViewerError")+": "+c);a._ControlRenderedTo=void 0;qv.util.hideActivityIndicator(a)}},GetDesigntimeMetadata:function(a){for(var c=[],d=0;d<a.Metadata.Axes.length;d++){var b=a.Metadata.Axes[d],f={};f.Name=b.Name;f.Title=b.Title;f.DataField=b.DataField;f.Type=qv.util.ToQueryViewerAxisType(b.AxisType);f.Filter=b.Filter;f.ExpandCollapse=b.ExpandCollapse;f.AxisOrder=b.Order;f.Format={};f.Format.Subtotals=b.Subtotals;f.Format.Picture=b.Picture;f.Format.CanDragToPages=
b.CanDragToPages;f.Format.Style=b.Style;0<b.ValuesStyles.length&&(f.Format.ValuesStyles=b.ValuesStyles);c.push(f)}for(d=0;d<a.Metadata.Data.length;d++)b=a.Metadata.Data[d],f={},f.Name=b.Name,f.Title=b.Title,f.DataField=b.DataField,f.Type=qv.util.ToQueryViewerAxisType(b.AxisType),f.Aggregation=b.Aggregation,f.Format={},f.Format.Picture=b.Picture,f.Format.Style=b.Style,f.Format.TargetValue=b.TargetValue,f.Format.MaximumValue=f.Format.TargetValue,0<b.ConditionalStyles.length&&(f.Format.ConditionalStyles=
b.ConditionalStyles),c.push(f);return c},MergeFields:function(a,c){a.Type=c.AxisType;if("Data"!=a.Type&&"Hidden"!=a.Type){switch(a.AxisOrder.Type){case "None":case "Ascending":case "Descending":a.AxisOrder.Type=c.Order;break;case "Custom":"Descending"==c.Order&&a.AxisOrder.Values.reverse()}"No"!=a.Format.Subtotals&&void 0!=c.Subtotals&&(a.Format.Subtotals="Yes"==c.Subtotals?"Yes":"Hidden");a.Filter=c.Filter;a.ExpandCollapse=c.ExpandCollapse}},GetOrderedAxesKeys:function(a){function c(b,a,f){return Array(a-
(""+b).length+1).join(f||"0")+b}for(var d=[],b=0;b<a.length;b++){var f=a[b],p;switch(f.AxisType){case "Row":p="A"+c(f.AxisPosition,4,"0")+c(b,4,"0");break;case "Column":p="B"+c(f.AxisPosition,4,"0")+c(b,4,"0");break;case "Page":p="C"+c(f.AxisPosition,4,"0")+c(b,4,"0");break;case "Hidden":p="D"+c(f.AxisPosition,4,"0")+c(b,4,"0");break;case "Data":p="E"+c(f.AxisPosition,4,"0")+c(b,4,"0")}d.push(p)}d.sort();return d},GetContainerControlClass:function(a){return""!=a.Class?a.Class+"-"+a.RealType.toLowerCase():
""},GetContainerControlClasses:function(a){var c=qv.util.GetContainerControlClass(a),d;switch(a.RealType){case "Card":d="qv-card";break;case "Chart":d="qv-chart";break;case "PivotTable":d="qv-pivottable";break;case "Table":d="qv-table"}""!=c&&(d+=" "+c);return d},SetUserControlClass:function(a,c){a.getContainerControl().className="gx_usercontrol "+c}};var STATE_DONE=4,STATUS_OK=200;
qv.services=function(){function a(b,a){var c=qv.services.RuntimeFieldsJSON(b),d="",h="",l;l="Table"==b.RealType?"OnlyRows":"AllAxisTypes";""!=b.QueryInfo&&(h=eval("("+b.QueryInfo+")"),d=h.TextForNullValues,h=gx.json.serializeJson(h.Fields));return b.ObjectName!=a.ObjectName||b.ObjectType!=a.ObjectType||b.ObjectId!=a.ObjectId||b.Object!=a.Object||c!=a.RuntimeFieldsJSON||d!=a.QueryInfoTextForNullValues||h!=a.QueryInfoFieldsJSON||l!=a.MetadataType?(a.ObjectName=b.ObjectName,a.ObjectType=b.ObjectType,
a.ObjectId=b.ObjectId,a.Object=b.Object,a.RuntimeFieldsJSON=c,a.QueryInfoTextForNullValues=d,a.QueryInfoFieldsJSON=h,a.MetadataType=l,!0):!1}function c(b,a){function c(b,a,e){for(var b=d(b),f=0;f<a.length;f++){var q=a[f],g="";void 0!=q[e]&&(g=q[e].Type);""!=g&&(q=qv.services.postInfo._priv.SdtWithValuesJSON("Order",g,"Custom",q[e].Values,!1),b+=","+q)}return b}var m=qv.services.RuntimeParametersJSON(b),h=c(b,b.Axes,"AxisOrder"),l="",q="",e="",g="Table"==b.RealType?"PagedRecordSet":"PivotTable"==b.RealType?
"PagedLineSet":"NotPaged";""!=b.QueryInfo&&(e=eval("("+b.QueryInfo+")"),l=e.SQLSentence,q=gx.json.serializeJson(e.Parameters),e=c(b,e.Fields,"Order"));return b.ObjectName!=a.ObjectName||b.ObjectType!=a.ObjectType||b.ObjectId!=a.ObjectId||b.Object!=a.Object||m!=a.RuntimeParametersJSON||h!=a.OrderJSON||l!=a.QueryInfoSQLSentence||q!=a.QueryInfoParametersJSON||e!=a.QueryInfoOrderJSON||g!=a.DataType?(a.ObjectName=b.ObjectName,a.ObjectType=b.ObjectType,a.ObjectId=b.ObjectId,a.Object=b.Object,a.RuntimeParametersJSON=
m,a.OrderJSON=h,a.QueryInfoSQLSentence=l,a.QueryInfoParametersJSON=q,a.QueryInfoOrderJSON=e,a.DataType=g,!0):!1}function d(b){return"Chart"==b.RealType&&qv.chart.IsDatetimeXAxis(b)||"Card"==b.RealType&&(b.IncludeSparkline||b.IncludeTrend)}return{url:function(){function b(b,a){var c=qv.util.getGenerator(),d;d=(new Date).getTime();var l=b.enableServerDebug?"_debug":"";switch(c){case "C#":var c=new gx.util.Url(location.href),q=c.path,q=q.substr(0,q.lastIndexOf("/")+1);urlresult=""==c.port?c.protocol+
"://"+c.host+q:c.protocol+"://"+c.host+":"+c.port+q;return urlresult+"agxpl_get"+l+".aspx?"+a+","+d;case "Java":return c=gx.util.resourceUrl(gx.basePath,!0),c+"servlet/qviewer.services.agxpl_get"+l+"?"+a+","+d;default:return""}}return{getDefaultOutputURL:function(a){return b(a,"defaultoutput")},getRecordsetCacheKeyURL:function(a){return b(a,"recordsetcachekey")},getMetadataURL:function(a){return b(a,"metadata")},getDataURL:function(a){return b(a,"data")},getAttributeValuesURL:function(a){return b(a,
"attributevalues")},getPageDataForTableURL:function(a){return b(a,"pagedatafortable")},getPageDataForPivotTableURL:function(a){return b(a,"pagedataforpivottable")},getQueryParametersURL:function(a){return b(a,"queryparameters")}}}(),postInfo:function(){function a(b,e){var g="",d,h,p,m,l,D,x,H,z,k;d=!1;for(i=0;void 0!=b.Axes[i];i++){d=!0;g+=""!=g?",":"";g+="{";h="";m=p=0;k=z=H=x=D=l="";var B;B=b.Axes[i];var v="",w=!1;if(void 0!=B.Format&&void 0!=B.Format.ValuesStyles)for(var o=0;void 0!=B.Format.ValuesStyles[o];o++)w=
!0,v+=""!=v?",":"",v+="{",v+='"Value":"'+encodeURIComponent(B.Format.ValuesStyles[o].Value)+'"',v+=",",v+='"Style":"'+encodeURIComponent(B.Format.ValuesStyles[o].StyleOrClass)+'"',v+=",",v+='"Propagate":'+(B.Format.ValuesStyles[o].ApplyToRowOrColumn?"true":"false"),v+="}";w&&(v='"ValuesStyles":['+v+"]");B=v;v=b.Axes[i];w="";o=!1;if(void 0!=v.Format&&void 0!=v.Format.ConditionalStyles)for(var K=0;void 0!=v.Format.ConditionalStyles[K];K++)o=!0,w+=""!=w?",":"",w+="{",w+='"Operator":"'+v.Format.ConditionalStyles[K].Operator+
'"',w+=",",w+='"Value1":"'+encodeURIComponent(v.Format.ConditionalStyles[K].Value1)+'"',"IN"==v.Format.ConditionalStyles[K].Operator&&(w+=",",w+='"Value2":"'+encodeURIComponent(v.Format.ConditionalStyles[K].Value2)+'"'),w+=",",w+='"Style":"'+encodeURIComponent(v.Format.ConditionalStyles[K].StyleOrClass)+'"',w+="}";o&&(w='"ConditionalStyles":['+w+"]");v=w;w=b.Axes[i];o="";void 0!=w.Grouping&&(o+="{",o+='"GroupByYear":'+(w.Grouping.GroupByYear?"true":"false"),o+=",",o+='"YearTitle":"'+w.Grouping.YearTitle+
'"',o+=",",o+='"GroupBySemester":'+(w.Grouping.GroupBySemester?"true":"false"),o+=",",o+='"SemesterTitle":"'+w.Grouping.SemesterTitle+'"',o+=",",o+='"GroupByQuarter":'+(w.Grouping.GroupByQuarter?"true":"false"),o+=",",o+='"QuarterTitle":"'+w.Grouping.QuarterTitle+'"',o+=",",o+='"GroupByMonth":'+(w.Grouping.GroupByMonth?"true":"false"),o+=",",o+='"MonthTitle":"'+w.Grouping.MonthTitle+'"',o+=",",o+='"GroupByDayOfWeek":'+(w.Grouping.GroupByDayOfWeek?"true":"false"),o+=",",o+='"DayOfWeekTitle":"'+w.Grouping.DayOfWeekTitle+
'"',o+=",",o+='"HideValue":'+(w.Grouping.HideValue?"true":"false"),o+="}",o='"Grouping":'+o);w=o;void 0!=b.Axes[i].Format&&(h=b.Axes[i].Format.Picture?b.Axes[i].Format.Picture:"",p=b.Axes[i].Format.TargetValue?b.Axes[i].Format.TargetValue:0,m=b.Axes[i].Format.MaximumValue?b.Axes[i].Format.MaximumValue:0,l=b.Axes[i].Format.Style?b.Axes[i].Format.Style:"",D=b.Axes[i].Format.Subtotals?b.Axes[i].Format.Subtotals:"",x=b.Axes[i].Format.CanDragToPages);void 0!=b.Axes[i].AxisOrder&&(H=b.Axes[i].AxisOrder.Type);
void 0!=b.Axes[i].ExpandCollapse&&(z=b.Axes[i].ExpandCollapse.Type);void 0!=b.Axes[i].Filter&&(k=b.Axes[i].Filter.Type);void 0==k&&(k="ShowSomeValues");g+='"Name":"'+encodeURIComponent(b.Axes[i].Name)+'"';g+=",";g+='"Caption":"'+encodeURIComponent(b.Axes[i].Title)+'"';g+=",";g+='"Aggregation":"'+b.Axes[i].Aggregation+'"';g+=",";o=b.Axes[i].Type;g+='"Axis":{"Type":"'+("Row"==o?"Rows":"Column"==o?"Columns":"Page"==o?"Pages":"NotShow"==o?"Hidden":o)+'"}';g+=",";g+='"Picture":"'+encodeURIComponent(h)+
'"';g+=",";g+='"TargetValue":'+p;g+=",";g+='"MaximumValue":'+m;g+=",";g+='"Style":"'+l+'"';g+=",";g+='"Subtotals":"'+D+'"';g+=",";g+='"CanDragToPages":"'+x+'"';""!=H&&(h=c("Order",H,"Custom",b.Axes[i].AxisOrder.Values,e),g+=""!=h?","+h:"");""!=z&&(z=c("ExpandCollapse",z,"ExpandSomeValues",b.Axes[i].ExpandCollapse.Values,e),g+=""!=z?","+z:"");""!=k&&b.Axes[i].Filter.Values&&(k=c("Filter",k,"ShowSomeValues",b.Axes[i].Filter.Values,e),g+=""!=k?","+k:"");g+=""!=B?","+B:"";g+=""!=v?","+v:"";g+=""!=w?","+
w:"";g+="}"}d&&(g='"RuntimeFields":['+g+"]");return g}function c(b,a,f,d,h){var p="";if(""!=a){p=p+('"'+b+'":')+"{"+('"Type":"'+a+'"');strValues="";if(a==f){existValues=!1;for(j=0;void 0!=d[j];j++)existValues=!0,strValues+=""!=strValues?",":"",strValues=h?strValues+('"'+encodeURIComponent(d[j])+'"'):strValues+('"'+d[j]+'"');existValues&&(strValues=',"Values":['+strValues+"]")}p+=strValues;p+="}"}return p}function p(b){var a="",c=!1;if(b.Object){b=eval(b.Object);for(i=2;i<b.length;i++)c=!0,a+=""!=
a?",":"",a+="{",a+='"Value":"'+encodeURIComponent(b[i])+'"',a+="}"}else for(i=0;void 0!=b.Parameters[i];i++)c=!0,a+=""!=a?",":"",a+="{",a+='"Name":"'+b.Parameters[i].Name+'"',a+=",",a+='"Value":"'+encodeURIComponent(b.Parameters[i].Value)+'"',a+="}";c&&(a='"RuntimeParameters":['+a+"]");return a}function m(a){var b="",c=!1;for(i=0;void 0!=a[i];i++){c=!0;b+=""!=b?",":"";b+="{";b+='"DataField":"'+a[i].DataField+'"';b+=",";b+='"NullIncluded":'+a[i].NullIncluded;strIncludedValues="";existValues=!1;for(j=
0;void 0!=a[i].NotNullValues.Included[j];j++)existValues=!0,strIncludedValues+=""!=strIncludedValues?",":"",strIncludedValues+='"'+encodeURIComponent(a[i].NotNullValues.Included[j])+'"';existValues&&(strIncludedValues=',"Included":['+strIncludedValues+"]");strExcludedValues="";existValues=!1;for(j=0;void 0!=a[i].NotNullValues.Excluded[j];j++)existValues=!0,strExcludedValues+=""!=strExcludedValues?",":"",strExcludedValues+='"'+encodeURIComponent(a[i].NotNullValues.Excluded[j])+'"';existValues&&(strExcludedValues=
',"Excluded":['+strExcludedValues+"]");b+=",";b+='"NotNullValues":{"DefaultAction":"'+a[i].NotNullValues.DefaultAction+'"'+strIncludedValues+strExcludedValues+"}";b+="}"}c&&(b='"Filters":['+b+"]");return b}function h(b){return b.UseRecordsetCache?'{"ActualKey":"'+b.RecordsetCache.ActualKey+'","OldKey":"'+b.RecordsetCache.OldKey+'","MinutesToKeep":'+b.MinutesToKeepInRecordsetCache+',"MaximumSize":'+b.MaximumCacheSize+"}":'{"ActualKey":"","OldKey":"","MinutesToKeep":0,"MaximumSize":0}'}function l(b){var a;
a=""+(""!=b.ParentObject.PackageName?'"ApplicationNamespace":"'+b.ParentObject.PackageName+'",':"");b.Object?(b=eval(b.Object),a+='"ObjectName":"'+b[1].replace(/\\/g,".")+'"'):(a+='"ObjectName":"'+b.ObjectName+'"',a=a+","+('"Alt_ObjectType":"'+b.ObjectType+'"'),a=a+","+('"Alt_ObjectId":'+b.ObjectId));return a}return{DefaultOutput:function(b){var a;a="{"+l(b);a+=""!=b.ObjectInfo?',"ObjectInfo":'+b.ObjectInfo:"";return"Data="+encodeURIComponent(a+"}")},RecordsetCacheKey:function(b){b="{"+l(b);return"Data="+
encodeURIComponent(b+"}")},Metadata:function(c){var e="",f=p(c),d=a(c,!0),e=e+"{"+l(c),e=e+(""!=c.QueryInfo?',"QueryInfo":'+c.QueryInfo:""),e=e+(""!=c.AppSettings?',"AppSettings":'+c.AppSettings:""),e=e+(""!=f?","+f:"")+(""!=d?","+d:"")+","+('"TableType":"'+c.RealType+'"'),e=e+","+('"AllowAxesOrderChange":'+c.AllowChangeAxesOrder),e=e+","+('"RememberLayout":'+c.RememberLayout),e=e+","+('"ShowDataLabelsIn":"'+c.ShowDataLabelsIn+'"'),e=e+","+('"ShowAxesSelectors":"'+c.ShowAxesSelectors+'"'),e=e+","+
('"RecordsetCacheInfo":'+h(c)),e=e+","+('"ReturnSampleData":'+c.ReturnSampleData);return"Data="+encodeURIComponent(e+"}")},Data:function(c){var e="",f=p(c),m=a(c,!0),e=e+"{"+l(c),e=e+(""!=c.QueryInfo?',"QueryInfo":'+c.QueryInfo:""),e=e+(""!=c.AppSettings?',"AppSettings":'+c.AppSettings:""),e=e+(""!=f?","+f:"")+(""!=m?","+m:"")+","+('"TableType":"'+c.RealType+'"'),e=e+","+('"SortAscendingForced":'+d(c)),e=e+","+('"AllowAxesOrderChange":'+c.AllowChangeAxesOrder),e=e+","+('"RecordsetCacheInfo":'+h(c)),
e=e+","+('"ReturnSampleData":'+c.ReturnSampleData);return"Data="+encodeURIComponent(e+"}")},AttributeValues:function(c,e,f,d,m){var y="",A=p(c),t=a(c,!0),y=y+"{"+l(c),y=y+","+('"DataField":"'+e+'"')+","+('"PageNumber":'+f)+","+('"PageSize":'+d)+","+('"Filter":"'+m+'"')+(""!=c.QueryInfo?',"QueryInfo":'+c.QueryInfo:""),y=y+(""!=c.AppSettings?',"AppSettings":'+c.AppSettings:""),y=y+(""!=A?","+A:"")+(""!=t?","+t:"")+","+('"TableType":"'+c.RealType+'"'),y=y+","+('"AllowAxesOrderChange":'+c.AllowChangeAxesOrder),
y=y+","+('"RecordsetCacheInfo":'+h(c)),y=y+","+('"ReturnSampleData":'+c.ReturnSampleData);return"Data="+encodeURIComponent(y+"}")},TablePageData:function(c,e,f,d,n,y,A){var t="",D=p(c),x=a(c,!0),A=m(A),t=t+"{"+l(c),t=t+","+('"PageNumber":'+e)+","+('"PageSize":'+(gx.lang.gxBoolean(c.Paging)?f:0)),t=t+","+('"ReturnTotPages":'+d)+","+('"Order":'+('{"DataField":"'+n+'","Type":"'+y+'"}'))+(""!=A?","+A:"")+(""!=c.QueryInfo?',"QueryInfo":'+c.QueryInfo:""),t=t+(""!=c.AppSettings?',"AppSettings":'+c.AppSettings:
""),t=t+(""!=D?","+D:"")+(""!=x?","+x:"")+","+('"AllowAxesOrderChange":'+c.AllowChangeAxesOrder),t=t+","+('"RecordsetCacheInfo":'+h(c)),t=t+","+('"ReturnSampleData":'+c.ReturnSampleData);return"Data="+encodeURIComponent(t+"}")},PivotTablePageData:function(c,e,f,d,n,y,A,t,D){for(var x="",H=p(c),z=a(c,!0),k="",B=!1,v=0;void 0!=n[v];v++)B=!0,k+=""!=k?",":"",k+="{",k+='"DataField":"'+n[v].DataField+'"',k+=",",k+='"Axis":{"Type":"'+n[v].Axis.Type+'","Position":'+n[v].Axis.Position+"}",k+=",",k+='"Order":"'+
n[v].Order+'"',k+=",",k+='"Subtotals":'+n[v].Subtotals,k+="}";B&&(k='"AxesInfo":['+k+"]");n=k;k="";B=!1;for(v=0;void 0!=y[v];v++)B=!0,k+=""!=k?",":"",k+="{",k+='"DataField":"'+y[v].DataField+'"',k+=",",k+='"Axis":{"Type":"'+y[v].Axis.Type+'","Position":'+y[v].Axis.Position+"}",k+="}";B&&(k='"DataInfo":['+k+"]");y=k;A=m(A);k="";B=!1;for(v=0;void 0!=t[v];v++){B=!0;k+=""!=k?",":"";k+="{";k+='"DataField":"'+t[v].DataField+'"';k+=",";k+='"NullExpanded":'+t[v].NullExpanded;strExpandedValues="";existValues=
!1;for(var w=0;void 0!=t[v].NotNullValues.Expanded[w];w++)existValues=!0,strExpandedValues+=""!=strExpandedValues?",":"",strExpandedValues+='"'+encodeURIComponent(t[v].NotNullValues.Expanded[w])+'"';existValues&&(strExpandedValues=',"Expanded":['+strExpandedValues+"]");strCollapsedValues="";existValues=!1;for(w=0;void 0!=t[v].NotNullValues.Collapsed[w];w++)existValues=!0,strCollapsedValues+=""!=strCollapsedValues?",":"",strCollapsedValues+='"'+encodeURIComponent(t[v].NotNullValues.Collapsed[w])+'"';
existValues&&(strCollapsedValues=',"Collapsed":['+strCollapsedValues+"]");k+=",";k+='"NotNullValues":{"DefaultAction":"'+t[v].NotNullValues.DefaultAction+'"'+strExpandedValues+strCollapsedValues+"}";k+="}"}B&&(k='"ExpandCollapse":['+k+"]");t=k;x=x+"{"+l(c);x=x+","+('"PageNumber":'+e)+","+('"PageSize":'+(gx.lang.gxBoolean(c.Paging)?f:0));x=x+","+('"ReturnTotPages":'+d)+","+('"ShowDataLabelsIn":"'+c.ShowDataLabelsIn+'"');x=x+(""!=n?","+n:"")+(""!=y?","+y:"")+(""!=A?","+A:"")+(""!=t?","+t:"")+(""!=c.QueryInfo?
',"QueryInfo":'+c.QueryInfo:"");x+=""!=c.AppSettings?',"AppSettings":'+c.AppSettings:"";x=x+(""!=H?","+H:"")+(""!=z?","+z:"")+","+('"AllowAxesOrderChange":'+c.AllowChangeAxesOrder);x=x+","+('"RecordsetCacheInfo":'+h(c));x=x+","+('"LayoutChanged":'+D)+","+('"ReturnSampleData":'+c.ReturnSampleData);return"Data="+encodeURIComponent(x+"}")},getQueryParameters:function(b){var a;a="{"+l(b);a+=""!=b.ObjectInfo?',"ObjectInfo":'+b.ObjectInfo:"";return"Data="+encodeURIComponent(a+"}")},_priv:{RuntimeParametersJSON:function(b){return p(b)},
RuntimeFieldsJSON:function(c){return a(c)},SdtWithValuesJSON:function(b,a,d,h,p){return c(b,a,d,h,p)}}}}(),RuntimeParametersJSON:function(b){return this.postInfo._priv.RuntimeParametersJSON(b)},RuntimeFieldsJSON:function(b,a){return this.postInfo._priv.RuntimeFieldsJSON(b,a)},getXMLHttpRequest:function(){if(window.XMLHttpRequest)return new window.XMLHttpRequest;try{return new ActiveXObject("MSXML2.XMLHTTP.3.0")}catch(b){return null}},CallServerSync:function(b,a,c,d){d=d||[];d.unshift(b);b=a.call(qv.services.url,
b);c=c.apply(qv.services.postInfo,d);d=qv.services.getXMLHttpRequest();d.open("POST",b,!1);d.setRequestHeader("Content-Type","application/x-www-form-urlencoded");d.send(c);return d.responseText},createAsyncServerCallFn:function(b,a,c,d,h){return function(l,q){q=q||[];q.unshift(b);var e=function(a){h&&"Card"!=b.RealType&&(a=h.call(qv.util.css,a));l(a,b)};if(gx.lang.gxBoolean(b.IsExternalQuery))e(b.ExternalQueryResultObj()[d]);else{var g=a.call(qv.services.url,b),s=c.apply(qv.services.postInfo,q),n=
qv.services.getXMLHttpRequest(),y=function(){n.readyState==STATE_DONE&&n.status==STATUS_OK&&e(n.responseText)};gx.util.browser.isIE()?n.onreadystatechange=y:n.onload=y;n.open("POST",g);n.setRequestHeader("Content-Type","application/x-www-form-urlencoded");n.send(s)}}},parseRecordsetCacheKeyXML:function(b){""!=b.xml.recordsetCacheKey&&(b.RecordsetCache=b.RecordsetCache||{},b.RecordsetCache.OldKey=b.RecordsetCache.ActualKey?b.RecordsetCache.ActualKey:"",b.RecordsetCache.ActualKey=b.xml.recordsetCacheKey)},
parseDataXML:function(b){if(""!=b.xml.data){var a=qv.util.dom.xmlDocument(b.xml.data),a=qv.util.dom.getSingleElementByTagName(a,"Recordset");b.Data=b.Data||{};a=gx.util.browser.isIE()?qv.util.dom.getMultipleElementsByTagName(qv.util.dom.getSingleElementByTagName(a,"Page"),"Record"):qv.util.dom.getMultipleElementsByTagName(a,"Record");b.Data.Rows=[];for(var c=0;c<a.length;c++){for(var d={},h=0;h<a[c].childNodes.length;h++){var l=a[c].childNodes[h];1==l.nodeType&&(d[l.nodeName]=1==l.childNodes.length?
l.childNodes[0].nodeValue:"")}b.Data.Rows.push(d)}}},parseMetadataXML:function(a){function c(a,b){if("greaterequal"==a&&"lessequal"==b)return"IN";switch(a){case "equal":return"EQ";case "less":return"LT";case "greater":return"GT";case "lessequal":return"LE";case "greaterequal":return"GE";case "notequal":return"NE"}}function d(a){switch(a){case "rows":return"Rows";case "columns":return"Columns";case "filters":return"Pages";case "data":return"Data";case "hidden":return"Hidden"}}function m(a,b,c,e){var f=
{},a=qv.util.dom.getSingleElementByTagName(a,b);if(null!=a){f.GroupFound=!0;f.TotalValueFound=!1;c=qv.util.dom.getMultipleElementsByTagName(a,c);f.Values=[];for(a=0;a<c.length;a++)b=null!=c[a].firstChild?c[a].firstChild.nodeValue:"","TOTAL"==b&&e?f.TotalValueFound=!0:f.Values.push(b)}else f.GroupFound=!1;return f}function h(a){if(0==a.indexOf("gxpl_cssReplace("))var b=a.indexOf("gxpl_cssReplace("),c=a.indexOf(")",b),a=a.substring(b+16,c);return a}function l(a){for(var a=qv.util.dom.getSingleElementByTagName(a,
"formatValues"),a=null!=a?qv.util.dom.getMultipleElementsByTagName(a,"value"):[],b=[],c=0;c<a.length;c++){var e={};e.Value=qv.util.trim(null!=a[c].firstChild?a[c].firstChild.nodeValue:"");e.StyleOrClass=h(a[c].getAttribute("format"));e.ApplyToRowOrColumn="yes"==a[c].getAttribute("recursive");b.push(e)}return b}function q(a){for(var a=qv.util.dom.getSingleElementByTagName(a,"conditionalFormats"),a=null!=a?qv.util.dom.getMultipleElementsByTagName(a,"rule"):[],b=[],e=0;e<a.length;e++){var d={};d.Operator=
c(a[e].getAttribute("op1"),a[e].getAttribute("op2"));d.Value1=parseFloat(a[e].getAttribute("value1"));"IN"==d.Operator&&(d.Value2=parseFloat(a[e].getAttribute("value2")));d.StyleOrClass=h(a[e].getAttribute("format"));b.push(d)}return b}if(""!=a.xml.metadata){var e=qv.util.dom.xmlDocument(a.xml.metadata),g=qv.util.dom.getSingleElementByTagName(e,"OLAPCube");a.Metadata=a.Metadata||{};a.Metadata.TextForNullValues=g.getAttribute("textForNullValues");var s=qv.util.dom.getMultipleElementsByTagName(g,"OLAPDimension");
a.Metadata.Axes=[];for(e=0;e<s.length;e++){var n={};n.Name=s[e].getAttribute("name");n.Title=s[e].getAttribute("displayName");n.DataField=s[e].getAttribute("dataField");n.DataType=s[e].getAttribute("dataType");n.AxisType=d(s[e].getAttribute("defaultPosition"));n.Picture=s[e].getAttribute("picture");if(""==n.Picture)switch(n.DataType){case "integer":n.Picture="ZZZZZZZZZZZZZZ9";break;case "real":n.Picture="ZZZZZZZZZZZZZZ9.99";break;case "date":n.Picture="99/99/9999";break;case "datetime":n.Picture=
"99/99/9999 99:99:99"}var y=s[e].getAttribute("validPositions");n.CanDragToPages=0<=y.indexOf("filters");n.Style=s[e].getAttribute("format");var A=m(s[e],"include","value",!0),t=m(s[e],"exclude","value",!0),D=m(s[e],"expand","value",!1),y=m(s[e],"customOrder","Value",!1);n.Subtotals="no"==s[e].getAttribute("summarize")?"No":t.GroupFound&&t.TotalValueFound?"Hidden":"Yes";n.Filter={};!A.GroupFound&&!t.GroupFound?n.Filter.Type="ShowAllValues":!A.GroupFound&&t.GroupFound&&0==t.Values.length&t.TotalValueFound?
n.Filter.Type="ShowAllValues":A.GroupFound&&!t.GroupFound&&0==A.Values.length?n.Filter.Type="HideAllValues":(n.Filter.Type="ShowSomeValues",n.Filter.Values=A.Values);n.ExpandCollapse={};D.GroupFound?D.GroupFound&&0==D.Values.length?n.ExpandCollapse.Type="CollapseAllValues":(n.ExpandCollapse.Type="ExpandSomeValues",n.ExpandCollapse.Values=D.Values):n.ExpandCollapse.Type="ExpandAllValues";n.Order={};A=s[e].getAttribute("order");null==A?n.Order.Type="None":(n.Order.Type=qv.util.capitalize(A),"Custom"==
n.Order.Type&&(n.Order.Values=y.Values));n.ValuesStyles=l(s[e]);a.Metadata.Axes.push(n)}g=qv.util.dom.getMultipleElementsByTagName(g,"OLAPMeasure");a.Metadata.Data=[];for(e=0;e<g.length;e++)s={},s.Name=g[e].getAttribute("name"),s.Title=g[e].getAttribute("displayName"),s.DataField=g[e].getAttribute("dataField"),s.Aggregation=g[e].getAttribute("aggregation"),s.DataType=g[e].getAttribute("dataType"),s.AxisType=d(g[e].getAttribute("defaultPosition")),s.Picture=g[e].getAttribute("picture"),""==s.Picture&&
(s.Picture="integer"==s.DataType?"ZZZZZZZZZZZZZZ9":"ZZZZZZZZZZZZZZ9.99"),s.Aggregation=qv.util.capitalize(s.Aggregation),s.TargetValue=parseFloat(g[e].getAttribute("targetValue")),s.MaximumValue=parseFloat(g[e].getAttribute("maximumValue")),s.Style=g[e].getAttribute("format"),0>=s.TargetValue&&(s.TargetValue=100),0>=s.MaximumValue&&(s.MaximumValue=100),s.ConditionalStyles=q(g[e]),a.Metadata.Data.push(s)}},GetDataIfNeeded:function(a,f){a.Data=a.Data||{};a.Data.LastServiceCallKey=a.Data.LastServiceCallKey||
{};c(a,a.Data.LastServiceCallKey)||gx.lang.gxBoolean(a.IsExternalQuery)?a.calculatePivottableData(f):f(a.xml.data,a)},GetMetadataIfNeeded:function(b,c){b.Metadata=b.Metadata||{};b.Metadata.LastServiceCallKey=b.Metadata.LastServiceCallKey||{};a(b,b.Metadata.LastServiceCallKey)||gx.lang.gxBoolean(b.IsExternalQuery)?b.calculatePivottableMetadata(c):c(b.xml.metadata,b)},GetRecordsetCacheKeyIfNeeded:function(a,f){a.UseRecordsetCache?(a.RecordsetCache=a.RecordsetCache||{},a.RecordsetCache.LastServiceCallKey=
a.RecordsetCache.LastServiceCallKey||{},c(a,a.RecordsetCache.LastServiceCallKey)?a.getRecordsetCacheKey(f):f(a.xml.recordsetCacheKey,a)):f("",a)},IsObjectSet:function(a){return a.Object||""!=a.ObjectName||""!=a.ObjectType&&0!=a.ObjectId}}}();
qv.pivot=function(){function a(a){var c=qv.util.GetContainerControlClasses(a);""!=c&&qv.util.SetUserControlClass(a,c);c=a.userControlId()+"_"+a.ObjectName.replace(/,/g,"").replace(/\./g,"")+"_pivot_page";a.pivotParams={};a.pivotParams.page=c;var d=a.userControlId()+"_"+a.ObjectName.replace(/,/g,"").replace(/\./g,"")+"_pivot_content";a.pivotParams.content=d;if(a._ControlRenderedTo!=a.RealType||0==jQuery("#"+d).length)if(a._ControlRenderedTo!=a.RealType&&"PivotTable"==a.RealType){var m=qv.util.dom.getEmptyContainer(a);
qv.util.dom.createDiv(m,c,"","",{},"");qv.util.dom.createDiv(m,d,"","",{},"")}else jQuery("#"+a.ContainerName).find(".pivot_filter_div").attr("id",c),jQuery("#"+a.ContainerName).find(".conteiner_table_div").attr("id",d);a.pivotParams.container=a.getContainerControl();a.pivotParams.RealType=a.RealType;a.pivotParams.ObjectName=a.ObjectName;a.pivotParams.ControlName=a.ControlName;a.pivotParams.PageSize=a.Paging&&"false"!=a.Paging?a.PageSize:void 0;a.pivotParams.metadata=a.xml.metadata;a.pivotParams.data=
"Table"==a.RealType?a.ServerPagingForTable?a.xml.pageData:a.xml.data:a.ServerPagingForPivotTable?a.xml.pageData:a.xml.data;a.pivotParams.UcId=a.userControlId();a.pivotParams.ShrinkToFit=a.ShrinkToFit;a.pivotParams.DisableColumnSort=a.DisableColumnSort;a.pivotParams.RememberLayout=a.RememberLayout;a.pivotParams.ShowDataLabelsIn=a.ShowDataLabelsIn;a.pivotParams.ServerPaging=a.ServerPagingForTable&&!gx.lang.gxBoolean(a.IsExternalQuery);a.pivotParams.ServerPagingPivot=a.ServerPagingForPivotTable&&!gx.lang.gxBoolean(a.IsExternalQuery);
a.pivotParams.ServerPagingCacheSize=0;a.pivotParams.UseRecordsetCache=a.UseRecordsetCache;void 0!=OAT.Loader?renderJSPivot(a.pivotParams,qv.collection,a):OAT.Loader.addListener(function(){renderJSPivot(a.pivotParams,qv.collection,a)});a._ControlRenderedTo=a.RealType;qv.util.hideActivityIndicator(a)}function c(b){b.getPageDataForTable(function(b,c){(new Date).getTime();qv.util.anyError(b)?(errMsg=qv.util.getErrorFromText(b),qv.util.renderError(c,errMsg)):(""!=b&&(c.xml.pageData=b),a(c))},[1,b.PageSize,
!0,"","",[]])}function d(a){var c=[];if(null!=a)for(var d=-1,m=0;m<a.childNodes.length;m++)if("ITEM"==a.childNodes[m].nodeName){d++;c[d]={};c[d].Name=a.childNodes[m].getAttribute("name");c[d].Values=[];for(var h=-1,l=a.childNodes[m],q=0;q<a.childNodes[m].childNodes.length;q++)if("VALUES"==a.childNodes[m].childNodes[q].nodeName){l=a.childNodes[m].childNodes[q];break}for(q=0;q<l.childNodes.length;q++)"VALUE"==l.childNodes[q].nodeName&&(h++,c[d].Values[h]=null!=l.childNodes[q].firstChild?l.childNodes[q].firstChild.nodeValue:
"")}return c}return{tryToRenderPivotTable:function(b){var d="",p=(new Date).getTime();b.xml=b.xml||{};qv.services.GetRecordsetCacheKeyIfNeeded(b,function(b,h){var l=!1;b!=h.xml.recordsetCacheKey&&(h.xml.recordsetCacheKey=b,l=!0);qv.util.anyError(b)?(d=qv.util.getErrorFromText(b),qv.util.renderError(h,d)):(l&&qv.services.parseRecordsetCacheKeyXML(h),qv.services.GetMetadataIfNeeded(h,function(b,e){var h=false;if(b!=e.xml.metadata){e.xml.metadata=b;h=true}var m=(new Date).getTime();if(qv.util.anyError(b)){d=
qv.util.getErrorFromText(b);qv.util.renderError(e,d)}else{h&&qv.services.parseMetadataXML(e);if(e.ServerPagingForTable&&e.RealType=="Table"&&!gx.lang.gxBoolean(e.IsExternalQuery)){h=false;OAT.getStateWhenServingPaging&&(h=OAT.getStateWhenServingPaging(e.userControlId()+"_"+e.ObjectName,e.ObjectName));!h||!e.RememberLayout?c(e,p,m):a(e)}else if(e.ServerPagingForPivotTable&&e.RealType=="PivotTable"&&!gx.lang.gxBoolean(e.IsExternalQuery)){h=false;OAT.getStateWhenServingPaging&&(h=OAT.getStateWhenServingPaging(e.userControlId()+
"_"+e.ObjectName,e.ObjectName));a(e)}else qv.services.GetDataIfNeeded(e,function(b,c){if(b!=c.xml.data)c.xml.data=b;(new Date).getTime();if(qv.util.anyError(b)){d=qv.util.getErrorFromText(b);qv.util.renderError(c,d)}else a(c)})}}))})},GetMetadataPivot:function(a){var c=qv.util.GetDesigntimeMetadata(a);if(0<c.length){for(var d=a.oat_element.getMetadataXML(),a=qv.pivot.GetRuntimeMetadata(d,a.RealType),d=[],m=qv.util.GetOrderedAxesKeys(a),h=0;h<m.length;h++){for(var l=parseInt(m[h].substr(5,4)),l=a[l],
q,e,g=0;g<c.length;g++)if(q=c[g],q.Name==l.Name){e=qv.util.cloneObject(q);break}qv.util.MergeFields(e,l);d.push(e)}return d}return[]},GetRuntimeMetadata:function(a,c){function d(a,b,c,e){var b=qv.util.dom.getValueNode(qv.util.dom.getSingleElementByTagName(a,b)),f=[],a=qv.util.dom.getSingleElementByTagName(a,c);if(null!=a){a=qv.util.dom.getMultipleElementsByTagName(a,"value");for(c=0;c<a.length;c++){var h=qv.util.trim(qv.util.dom.getValueNode(a[c]));null!=h&&("TOTAL"!=h.toUpperCase()||!e)&&f.push(h)}}return{Type:b,
Values:f}}for(var m=qv.util.dom.xmlDocument(a),h=qv.util.dom.getSingleElementByTagName(m,"OLAPCube"),m=[],l=qv.util.dom.getMultipleElementsByTagName(h,"OLAPDimension"),q=0;q<l.length;q++){var e={},g=qv.util.dom.getValueNode(qv.util.dom.getSingleElementByTagName(l[q],"name")),s=qv.util.dom.getValueNode(qv.util.dom.getSingleElementByTagName(l[q],"hidden")),n=qv.util.dom.getValueNode(qv.util.dom.getSingleElementByTagName(l[q],"defaultPosition")),y=qv.util.dom.getValueNode(qv.util.dom.getSingleElementByTagName(l[q],
"axisOrder")),A=qv.util.dom.getValueNode(qv.util.dom.getSingleElementByTagName(l[q],"summarize")),t=qv.util.dom.getValueNode(qv.util.dom.getSingleElementByTagName(l[q],"order"));e.Name=g;e.AxisType=qv.util.FromRuntimeMetadata(s,!0,n);e.AxisPosition=y;e.Order=qv.util.capitalize(t);"Table"==c?(e.Filter=d(l[q],"","include",!0),e.Filter.Type="ShowSomeValues"):(e.Subtotals="no"==A?"No":"Yes",e.Filter=d(l[q],"filterType","include",!0),e.ExpandCollapse=d(l[q],"collapseType","includeExpand",!1));m.push(e)}if("Table"!=
c){h=qv.util.dom.getMultipleElementsByTagName(h,"OLAPMeasure");for(q=0;q<h.length;q++)l={},g=qv.util.dom.getValueNode(qv.util.dom.getSingleElementByTagName(h[q],"name")),s=qv.util.dom.getValueNode(qv.util.dom.getSingleElementByTagName(h[q],"hidden")),y=(q+1).toString(),l.Name=g,l.AxisType=qv.util.FromRuntimeMetadata(s,!1,null),l.AxisPosition=y,m.push(l)}return m},GetDataPivot:function(a){return a.oat_element.getDataXML()},GetFilteredDataPivot:function(a){return a.oat_element.getFilteredDataXML()},
onOAT_PIVOTDragAndDropEvent:function(a,c){var d;"PivotTable"==a.RealType&&(IsQueryObjectPreview()&&window.external.SendText(a.ControlName,c),a.DragAndDrop&&(d=qv.util.dom.xmlDocument(c),d=qv.util.dom.selectXPathNode(d,"/DATA"),a.DragAndDropData.Name=d.getAttribute("name"),d=d.getAttribute("position"),a.DragAndDropData.Axis="rows"==d?"Row":"columns"==d?"Column":"Page",a.DragAndDrop()))},onItemClickEvent:function(a,c,p){var m,h;if(a.ItemClick&&!p||a.ItemDoubleClick&&p){h=p?h=a.ItemDoubleClickData:a.ItemClickData;
m=qv.util.dom.xmlDocument(c);var c=qv.util.dom.selectXPathNode(m,"/DATA/ITEM"),l=qv.util.dom.selectXPathNode(m,"/DATA/CONTEXT/RELATED"),q=qv.util.dom.selectXPathNode(m,"/DATA/CONTEXT/FILTERS");h.Name=c.getAttribute("name");m=c.getAttribute("location");h.Axis="rows"==m?"Row":"columns"==m?"Column":"pages"==m?"Page":"Data";h.Value=null!=c.firstChild?c.firstChild.nodeValue:"";h.Context=d(l);h.Filters=d(q);p?a.ItemDoubleClick():a.ItemClick()}},onItemExpandCollapseEvent:function(a,c,d){var m;IsQueryObjectPreview()&&
window.external.SendText(a.ControlName,c);if(a.ItemExpand&&!d||a.ItemCollapse&&d){m=d?m=a.ItemCollapseData:a.ItemExpandData;var c=qv.util.dom.xmlDocument(c),h=qv.util.dom.selectXPathNode(c,"/DATA/ITEM"),c=qv.util.dom.selectXPathNode(c,"/DATA/CONTEXT/EXPANDEDVALUES");m.Name=h.getAttribute("name");m.Value=h.firstChild.nodeValue;m.ExpandedValues=[];for(var h=-1,l=0;l<c.childNodes.length;l++)"VALUE"==c.childNodes[l].nodeName&&(h++,m.ExpandedValues[h]=c.childNodes[l].firstChild.nodeValue);d?a.ItemCollapse():
a.ItemExpand()}}}}();var HCChart,_highChartsDrawPointsWrapped,HIGHCHARTS_COLOR_PREFIX="highcharts-color-",HIGHCHARTS_MAX_COLORS=36,HIGHCHARTS_CUSTOM_COLOR=[],DEFAULTCHARTSPACING=10;
qv.chart=function(){function a(a){return"Timeline"==a.RealChartType||"SmoothTimeline"==a.RealChartType||"StepTimeline"==a.RealChartType}function c(b){return a(b)||"Sparkline"==b.RealChartType}function d(a){return"Pie"==a.RealChartType||"Pie3D"==a.RealChartType||"Doughnut"==a.RealChartType||"Doughnut3D"==a.RealChartType}function b(a){return"Radar"==a.RealChartType||"FilledRadar"==a.RealChartType||"PolarArea"==a.RealChartType}function f(a){return d(a)||"Funnel"==a.RealChartType||"Pyramid"==a.RealChartType}
function p(a){return("ColumnLine"==a.RealChartType||"Column3DLine"==a.RealChartType)&&1<a.Chart.Series.DataFields.length}function m(a){return"CircularGauge"==a.RealChartType||"LinearGauge"==a.RealChartType}function h(a){return"StackedColumn"==a.RealChartType||"StackedColumn3D"==a.RealChartType||"StackedColumn100"==a.RealChartType||"StackedBar"==a.RealChartType||"StackedBar100"==a.RealChartType||"StackedArea"==a.RealChartType||"StackedArea100"==a.RealChartType||"StackedLine"==a.RealChartType||"StackedLine100"==
a.RealChartType?!1:("InSeparateCharts"==a.PlotSeries||f(a))&&1<a.Chart.Series.DataFields.length}function l(a,b){for(var c=[],e=0;e<a.Charts.length;e++)for(var d=0;d<a.Charts[e].series.length;d++)c.push(a.Charts[e].series[d].data[b]);return c}function q(a,b,c,e,d){for(var u=0;u<a.Charts.length;u++)if(b.id!=a.Charts[u].container.id)for(var f=0;f<a.Charts[u].series.length;f++){var h=a.Charts[u].series[f].data[c];e?(d&&h.setState("hover"),a.Charts[u].tooltip.hide(0)):h.setState()}}function e(a){switch(a){case "Column":case "Column3D":case "StackedColumn":case "StackedColumn3D":case "StackedColumn100":case "PolarArea":return"column";
case "Bar":case "StackedBar":case "StackedBar100":case "LinearGauge":return"bar";case "Area":case "StackedArea":case "StackedArea100":case "FilledRadar":case "StepArea":return"area";case "SmoothArea":return"areaspline";case "Line":case "StackedLine":case "StackedLine100":case "Radar":case "Timeline":case "StepTimeline":case "Sparkline":case "StepLine":return"line";case "SmoothLine":case "SmoothTimeline":return"spline";case "ColumnLine":case "Column3DLine":return"column";case "Pie":case "Pie3D":case "Doughnut":case "Doughnut3D":return"pie";
case "Funnel":return"funnel";case "Pyramid":return"pyramid";case "CircularGauge":return"solidgauge";default:return"line"}}function g(a,b,c,e,d,u,f){function h(a,b){var c={};c.Name=a.Name;var r=o(a.DataType,a.Picture),r=w(b,a.Picture,a.DataType,r);c.Values=[r];return c}a.Name=c;a.Axis=e;a.Value=d;a.Selected=u;a.Context=[];for(c=0;c<b.Chart.Categories.DataFields.length;c++)d=b.Chart.Categories.DataFields[c],e=X(b,d),e=h(e,f[d]),a.Context.push(e);for(c=0;c<b.Chart.Series.DataFields.length;c++)d=b.Chart.Series.DataFields[c],
e=da(b,d),e=h(e,f[d]),a.Context.push(e);a.Filters=[]}function s(a,b){for(var c=!1,e=0;e<a.length;e++)for(var d=a[e],u=0;u<d.series.length;u++){var f=d.series[u].points[b];if(f.selected){f.select();break}else f.select(!0,0<u),c=!0}return c}function n(a){for(var b=0;b<a.length;b++){var c=a[b].getSelectedPoints();0<c.length&&c[0].select(!1,!1)}}function y(a){var b=qv.collection[this.chart.options.qv.viewerId],c=!1;if(b.SelectionAllowed())if("Line"==b.SelectionType)c=s(b.Charts,a.point.index);else if(a.point.select(),
c=a.point.selected,"InSeparateCharts"==b.PlotSeries&&c)for(var e=0;e<b.Charts.length;e++){var d=b.Charts[e].series[0].points[a.point.index];d!=a.point&&d.select(!1)}b.ItemClick&&(e=b.Chart.Series.ByName[this.name],d=qv.util.formatNumber(a.point.y,e.NumberFormat.DecimalPrecision,e.Picture,!1),g(b.ItemClickData,b,e.FieldName,"Data",d,c,b.Data.Rows[a.point.index]),b.ItemClick())}function A(a,b){return""==b?qv.util.dom.createSpan(null,"","","",{fontWeight:"bold"},null,a).outerHTML:qv.util.dom.createSpan(null,
"","","",{fontWeight:"bold",color:b},null,a).outerHTML}function t(a,b){var c=Math.min(b.getContainerControl().offsetHeight,b.getContainerControl().offsetWidth)/(h(b)?b.Chart.Series.DataFields.length:1)/13;return qv.util.dom.createSpan(null,"","","",{color:J(b,a),fontSize:c+"px"},null,qv.util.formatNumber(a.point.y,2,"ZZZZZZZZZZZZZZ9.99",!0)+"%").outerHTML}function D(a,b){function c(a){for(var b=a.y,e=a.series.data,a=a.index,r="",r=a,d=a+1;d<e.length&&e[d].y==b;d++)r=d;r<e.length-1&&r++;for(var u=
a,d=a-1;0<=d&&e[d].y==b;d--)u=d;b=(e[r].x-e[u].x)/1E3;return r=" ("+gx.getMessage("GXPL_QViewerDuration")+": "+qv.util.seconsdToText(b)+")"}var e,d=qv.collection[a.points[0].series.chart.options.qv.viewerId];h(d)?e=l(d,a.points[0].point.index):(e=[],$.each(a.points,function(a,b){e.push(b.point)}));for(var u={},f=!1,g=0;g<e.length;g++){var I=e[g].series.name;void 0==u[I]&&(u[I]=[]);u[I].push(e[g]);1<u[I].length&&(f=!0)}var g="",F,E;for(E in u){var I=b[E],k=u[E],G=J(d,k[0]);f&&(g+=qv.util.dom.createSpan(null,
"","","",{fontWeight:"bold",color:G},null,E).outerHTML+"<br/>");for(var m=0;void 0!=k[m];m++){var n=k[m],ka=parseInt(n.real_x?n.real_x:n.x);if(0<e.length&&e[0].series.chart.options.qv.comparing)g+=n.name+": "+qv.util.formatNumber(n.y,I.NumberFormat.DecimalPrecision,I.Picture,!1)+"<br/>";else{F!=ka&&(g+=n.name+"<br/>",F=ka);var ka="StepTimeline"==d.RealChartType?c(n):"",s=qv.util.dom.createSpan(null,"","","",{color:G},null,E+": ").outerHTML,n=qv.util.dom.createSpan(null,"","","",{fontWeight:"bold"},
null,qv.util.formatNumber(n.y,I.NumberFormat.DecimalPrecision,I.Picture,!1)).outerHTML,g=g+(s+n+ka+"<br/>")}}}return g}function x(a){"undefined"===typeof _avoidSelectionEventHandler&&(_avoidSelectionEventHandler=!1);if(!_avoidSelectionEventHandler){L(ea,"none");ea=null;if(a.xAxis){var b=a.target.options.qv,c=a.xAxis[0];qa(a.target.options.qv.viewerId,100*((c.min-b.dataMin)/(b.dataMax-b.dataMin)),100*((c.max-b.dataMin)/(b.dataMax-b.dataMin)))}else qa(a.target.options.qv.viewerId,0,100);b=qv.collection[a.target.options.qv.viewerId];
if(h(b)){var b=b.getContainerControl().id,b=$("[id^="+b+"_chart]"),e=[];$.each(b,function(b,c){if(c.id!=a.target.renderTo.id){var d=$("#"+c.id).highcharts();e.push(d)}});$.each(e,function(b,e){a.xAxis?e.get("xaxis").setExtremes(c.min,c.max):(_avoidSelectionEventHandler=!0,e.zoomOut(),_avoidSelectionEventHandler=!1)})}}}function H(a,b,c,e,d){function u(a,b,c,e,d){function r(a,b){return"date"==a?10==b.length:" "==b.charAt(10)}function u(a,b,c,e,d){var r=a.substr(0,4),f=a.substr(5,2),a=a.substr(8,2);
e||(b=b.replace("M",""));d||(b=b.replace("D",""));for(var h="",g=0;g<b.length;g++)h+=0==g?"":"/",h+=b.charAt(g);b=h.replace("Y",c?r:r.substr(2,2));e&&(b=b.replace("M",f));d&&(b=b.replace("D",a));return b}var f,h;if(""!=a)switch(d||("date"==c?"Days":"Seconds")){case "Years":f=a.substr(0,4)+"-01-01";h=u(f,e,r(c,b),!1,!1);break;case "Months":f=a.substr(0,7)+"-01";h=u(f,e,r(c,b),!0,!1);break;case "Semesters":f="06">=a.substr(5,2)?"01":"07";f=a.substr(0,5)+f+"-01";d="06">=a.substr(5,2)?"01":"02";dateStrSemester=
a.substr(0,5)+d+"-01";h=u(dateStrSemester,e,r(c,b),!0,!1);break;case "Quarters":f="03">=a.substr(5,2)?"01":"06">=a.substr(5,2)?"04":"09">=a.substr(5,2)?"07":"10";f=a.substr(0,5)+f+"-01";d="03">=a.substr(5,2)?"01":"06">=a.substr(5,2)?"02":"09">=a.substr(5,2)?"03":"04";dateStrQuarter=a.substr(0,5)+d+"-01";h=u(dateStrQuarter,e,r(c,b),!0,!1);break;case "Weeks":a=new gx.date.gxdate(a,"Y4MD");f=gx.date.dow(a);a=gx.date.dtadd(a,-86400*(f-1));f=qv.util.dateToString(a,!1);h=u(f,e,r(c,b),!0,!0);break;case "Days":f=
"date"==c?a:a.substr(0,10);h="date"==c?b:b.substr(0,10);break;case "Hours":f=a.substr(0,13)+":00:00";h=b.substr(0,13)+":00";break;case "Minutes":f=a.substr(0,16)+":00";h=b.substr(0,16);break;case "Seconds":f=a,h=b}else h=f="";return{dateStr:f,name:h}}var f;f={dateStr:null,name:null};var h=[],g=[],F=[];for(i=0;i<b.length;i++){var E=a.Values[i].ValueWithPicture,k=a.Values[i].Value,G,m;null!=b[i].Value?"Count"==e?(G=0,m=parseFloat(qv.util.trim(b[i].Value))):"Average"==e?(G=parseFloat(qv.util.trim(b[i].Value_N)),
m=parseFloat(qv.util.trim(b[i].Value_D))):(G=parseFloat(qv.util.trim(b[i].Value)),m=1):(G=null,m=0);E=u(k,E,c,gx.dateFormat,d);E.dateStr==f.dateStr||0==i?(null!=G&&(h.push(G),g.push(m)),0==i&&(f=E)):(f={x:f.dateStr,y:qv.util.aggregate(e,h,g),name:f.name},F.push(f),f=E,h=[G],g=[m])}0<h.length&&0<g.length&&(f={x:f.dateStr,y:qv.util.aggregate(e,h,g),name:f.name},F.push(f));return F}function z(a){var b=[],c=[],e="";for(i=0;i<a.Points.length;i++){var d,u;"Count"==a.Aggregation?(d=0,u=parseFloat(qv.util.trim(a.Points[i].Value))):
"Average"==a.Aggregation?(d=parseFloat(qv.util.trim(a.Points[i].Value_N)),u=parseFloat(qv.util.trim(a.Points[i].Value_D))):(d=parseFloat(qv.util.trim(a.Points[i].Value)),u=1);b.push(d);c.push(u);""==e&&(e=a.Points[i].Color)}b=qv.util.aggregate(a.Aggregation,b,c).toString();a.Points=[{Value:b,Value_N:b,Value_D:"1",Color:e}];a.NegativeValues=0>b;a.PositiveValues=0<b}function k(b){var c,e,d;a(b)?(b=DEFAULTCHARTSPACING,c=0,e=DEFAULTCHARTSPACING,d=0):d=e=c=b=DEFAULTCHARTSPACING;return[b,c,e,d]}function B(a,
b){var c,e;c=3>=a?24:50/(a-1)-1;e=100-(c+1)*(b-1);return{Width:c,Center:e,LowerExtreme:e-c/2,UpperExtreme:e+c/2}}function v(a,b){var c=1/a/2,e=-0.5+(b-0.5)/a;return{Width:c,Center:e,LowerExtreme:e-c/2,UpperExtreme:e+c/2}}function w(a,b,c,e){switch(c){case "integer":case "real":return qv.util.formatNumber(a,e.DecimalPrecision,b,!1);case "boolean":case "character":return qv.util.trim(a);case "date":case "datetime":return qv.util.formatDateTime(a,c,e.DateFormat,e.IncludeHours,e.IncludeMinutes,e.IncludeSeconds,
e.IncludeMilliseconds)}}function o(a,b){return"integer"==a||"real"==a?qv.util.ParseNumericPicture(a,b):"date"==a||"datetime"==a?qv.util.ParseDateTimePicture(a,b):null}function K(b){function c(a,b){var e="",d=!1,u=b?"backgroundcolor":"color";if(""!=a){for(var r=a.split(";"),f=0;f<r.length;f++){var h=r[f].split(":");if(2==h.length){var g=h[1];if(h[0].toLowerCase()==u){e=g;d=""!=g;break}}}d&&"#"==e.substr(0,1)&&(e=e.replace("#",""))}return[d,e]}function e(a,b,d,u,r,f,h){function g(a,b){for(var e=[!1,
""],d=0;d<a.ValuesStyles.length;d++){var u=a.ValuesStyles[d];if(u.Value==b){e=c(u.StyleOrClass,!1);break}}return e}function E(a,b){for(var e=[!1,""],d=!1,u=0;u<a.ConditionalStyles.length;u++){var r=a.ConditionalStyles[u];if(d=qv.util.satisfyStyle(b,r)){e=c(r.StyleOrClass,!1);break}}return e}var F,k=-1,I=!1;if(a){if(a=!1,null!=d&&(d=g(d,f),a=d[0],F=d[1]),!a)d=E(b,h),a=d[0],F=d[1],a||(k=r%HIGHCHARTS_MAX_COLORS,I=!0)}else d=c(b.Style,!1),a=d[0],F=d[1],a||(k=u%HIGHCHARTS_MAX_COLORS,I=!0);return{IsDefault:I,
Color:F,ColorIndex:k}}function d(a,b,c,e){for(var u="",r="",f=0;f<a.Chart.Categories.DataFields.length;f++){var h=a.Chart.Categories.DataFields[f],g;void 0!=b[h]?(g=qv.util.trim(b[h]),h=w(g,e[h].Picture,e[h].DataType,e[h].PictureProperties)):h=g=a.Metadata.TextForNullValues;u+=(""==u?"":", ")+g;r+=(""==r?"":", ")+h}b=[u,r];e={};e.Value=b[0];e.ValueWithPicture=b[1];a.Chart.Categories.Values.push(e);if(0==c)a.Chart.Categories.MinValue=e.Value,a.Chart.Categories.MaxValue=e.Value;else if(e.Value>a.Chart.Categories.MaxValue&&
(a.Chart.Categories.MaxValue=e.Value),e.Value<a.Chart.Categories.MinValue)a.Chart.Categories.MinValue=e.Value}function g(a,b,c,d,u){for(var r=0;r<a.Chart.Series.DataFields.length;r++){var f=a.Chart.Series.ByIndex[r],h=a.Chart.Series.DataFields[r],E=void 0!=b[h]?b[h]:null,F={};F.Value=E;var k=d[h].Datum,I=d[h].Multicolored;if("Average"==k.Aggregation){var pa=b[h+"_N"],h=b[h+"_D"];void 0==pa&&void 0==h&&(pa=E,h="1");F.Value_N=pa;F.Value_D=h}F.Color=I?e(I,k,u,0,c,a.Chart.Categories.Values[c].Value,E):
ra("");f.Points.push(F);0<F.Value&&(f.PositiveValues=!0);0>F.Value&&(f.NegativeValues=!0)}}function u(a,b){for(var e=0;e<b.ConditionalStyles.length;e++){var d=b.ConditionalStyles[e],u=c(d.StyleOrClass,!0),r=u[1];if(u[0]){plotBand={};plotBand.Color=ra(r);if("IN"==d.Operator)plotBand.From=parseFloat(d.Value1),plotBand.To=parseFloat(d.Value2);else if("EQ"==d.Operator)plotBand.From=parseFloat(d.Value1),plotBand.To=parseFloat(d.Value1);else if("GE"==d.Operator||"GT"==d.Operator)plotBand.From=parseFloat(d.Value1);
else if("LE"==d.Operator||"LT"==d.Operator)plotBand.To=parseFloat(d.Value1);plotBand.SeriesName=b.Title;a.Chart.PlotBands.push(plotBand)}}}function k(a,b){for(var c=!1,e=0;e<a.Metadata.Axes.length;e++){var d=a.Metadata.Axes[e];if("Rows"==d.AxisType||"Columns"==d.AxisType||"Pages"==d.AxisType)if("HideAllValues"==d.Filter.Type){c=!0;break}else if("ShowSomeValues"==d.Filter.Type){var u=qv.util.trim(b[d.DataField]);if(0>d.Filter.Values.indexOf(u)){c=!0;break}}}return c}b.Chart={};(function(a){a.Chart.Categories=
{};a.Chart.Categories.DataFields=[];for(var b=0;b<a.Metadata.Axes.length;b++){var c=a.Metadata.Axes[b];("Rows"==c.AxisType||"Columns"==c.AxisType)&&a.Chart.Categories.DataFields.push(c.DataField)}a.Chart.Series={};a.Chart.Series.DataFields=[];for(b=0;b<a.Metadata.Data.length;b++)a.Chart.Series.DataFields.push(a.Metadata.Data[b].DataField)})(b);b.Chart.Categories.MinValue=null;b.Chart.Categories.MaxValue=null;b.Chart.Categories.Values=[];var Ba=function(a){for(var b={},c=0;c<a.Metadata.Axes.length;c++){var e=
a.Metadata.Axes[c],d=o(e.DataType,e.Picture);b[e.DataField]={Picture:e.Picture,DataType:e.DataType,PictureProperties:d,Filter:e.Filter}}return b}(b);b.Chart.Series.ByName={};b.Chart.Series.ByIndex=[];var I=1==b.Chart.Categories.DataFields.length?X(b,b.Chart.Categories.DataFields[0]):null,F=function(b,e){function d(b,e,u){function r(a){for(var b=!1,e=0;e<a.length;e++)if(c(a[e].StyleOrClass,!1)[0]){b=!0;break}return b}f(b)||"PolarArea"==b.RealChartType&&1==b.Chart.Series.DataFields.length?u=!0:"Area"==
b.RealChartType||"StackedArea"==b.RealChartType||"StackedArea100"==b.RealChartType||"SmoothArea"==b.RealChartType||"StepArea"==b.RealChartType||"Line"==b.RealChartType||"StackedLine"==b.RealChartType||"StackedLine100"==b.RealChartType||"SmoothLine"==b.RealChartType||"StepLine"==b.RealChartType||"Sparkline"==b.RealChartType||a(b)||"Radar"==b.RealChartType||"FilledRadar"==b.RealChartType?u=!1:1<b.Chart.Series.DataFields.length&&!h(b)?u=!1:(b=r(e.ConditionalStyles),e=!1,null!=u&&(e=r(u.ValuesStyles)),
u=b||e);return u}for(var u={},r=0;r<b.Metadata.Data.length;r++){var g=b.Metadata.Data[r],F=d(b,g,e);u[g.DataField]={Datum:g,Multicolored:F}}return u}(b,I);b.Chart.PlotBands=[];for(var E=0;E<b.Chart.Series.DataFields.length;E++){var n=b.Chart.Series.DataFields[E],G=F[n].Datum,l={},n=F[n].Multicolored;l.FieldName=G.Name;l.Name=G.Title;l.DataType=G.DataType;l.Aggregation=G.Aggregation;var s=G.Picture;l.Picture=""==s?"integer"==l.DataType?"ZZZZZZZZZZZZZZ9":"ZZZZZZZZZZZZZZ9.99":s;l.NumberFormat=qv.util.ParseNumericPicture(l.DataType,
l.Picture);l.Color=n?ra(""):e(n,G,I,E,0,"",0);l.TargetValue=G.TargetValue;l.MaximumValue=G.MaximumValue;T(l);l.PositiveValues=!1;l.NegativeValues=!1;l.Points=[];b.Chart.Series.ByName[l.Name]=l;b.Chart.Series.ByIndex.push(l);u(b,G)}for(E=G=0;E<b.Data.Rows.length;E++)l=b.Data.Rows[E],k(b,l)||(d(b,l,G,Ba),g(b,l,G,F,I),G++);if(m(b))for(E=0;E<b.Chart.Series.DataFields.length;E++)l=b.Chart.Series.ByIndex[E],z(l)}function T(a){0>=a.TargetValue&&(a.TargetValue=100);0>=a.MaximumValue&&(a.MaximumValue=100);
a.MaximumValue<a.TargetValue&&(a.MaximumValue=a.TargetValue)}function ca(a){a._themeStyleSheet||(a._themeStyleSheet=N(gx.theme+".css"));return a._themeStyleSheet}function N(a){for(var b,c=0;c<document.styleSheets.length;c++)if(null!=document.styleSheets[c].href&&0<=document.styleSheets[c].href.indexOf(a)){b=document.styleSheets[c];break}return b}function C(a,b,c){for(var e=0,d=0;d<b.cssRules.length;d++){var u=b.cssRules[d];if(u.selectorText&&0==u.selectorText.indexOf(c)){var f=u.selectorText.replace(c,
"");a[f]=u.style.fill;e++}if(e==HIGHCHARTS_MAX_COLORS)break}}function J(a,b){var c;c=b.className&&0==b.className.indexOf("highcharts-color-")?parseInt(b.className.replace("highcharts-color-","")):b.colorIndex;if(c<HIGHCHARTS_MAX_COLORS){if(!a._HighchartsDefaultColors){a._HighchartsDefaultColors=[];var e={},d,u;a._queryViewerStyleSheet||(a._queryViewerStyleSheet=N("QueryViewer.css"));d=a._queryViewerStyleSheet;C(e,d,".highcharts-color-");""!=a.Class&&(d=ca(a),u="."+qv.util.GetContainerControlClass(a)+
" .highcharts-color-",C(e,d,u));for(d=0;d<HIGHCHARTS_MAX_COLORS;d++)a._HighchartsDefaultColors.push(e[d.toString()])}c=a._HighchartsDefaultColors[c]}else c=HIGHCHARTS_CUSTOM_COLOR[c-HIGHCHARTS_MAX_COLORS],6===c.length&&!isNaN(parseInt(c,16))&&(c="#"+c);return c}function ra(a){return{IsDefault:!1,Color:a,ColorIndex:"-1"}}function Y(a){return a.IsDefault?0>a.ColorIndex:""==a.Color}function U(a,b,c,e){if(!Y(c)){if(c.IsDefault)a=c.ColorIndex;else{var d=c.Color,c=HIGHCHARTS_CUSTOM_COLOR.indexOf(d);if(0>
c){HIGHCHARTS_CUSTOM_COLOR.push(d);var c=HIGHCHARTS_CUSTOM_COLOR.length-1,c=HIGHCHARTS_MAX_COLORS+c,u=6===d.length&&!isNaN(parseInt(d,16))?"#":"",d="."+HIGHCHARTS_COLOR_PREFIX+c+" {fill: "+u+d+"; stroke: "+u+d+";}",a=ca(a);a.insertRule(d,a.cssRules.length)}else c=HIGHCHARTS_MAX_COLORS+c;a=c}e?b.colorIndex=a:b.className=HIGHCHARTS_COLOR_PREFIX+a}}function wa(r,g,n){var s="date"==O(r)?"Days":"Seconds",o={qv:{}};o.qv.viewerId=r.userControlId();o.chart=function(b,c){var d={};d.spacing=k(b);if(h(b)){var f=
b.userControlId(),f=a(b)?ga(f):f;d.renderTo=document.getElementById(f+"_chart"+c.toString())}else d.renderTo=a(b)?document.getElementById(ga(b.userControlId())):b.getContainerControl();p(b)||(d.type=e(b.RealChartType));"Radar"==b.RealChartType||"FilledRadar"==b.RealChartType||"PolarArea"==b.RealChartType?d.polar=!0:"Column3D"==b.RealChartType||"StackedColumn3D"==b.RealChartType||"Column3DLine"==b.RealChartType?d.options3d={enabled:!0,alpha:15,beta:15,depth:50,viewDistance:25}:"Pie3D"==b.RealChartType||
"Doughnut3D"==b.RealChartType?d.options3d={enabled:!0,alpha:45,beta:0}:a(b)&&(d.zoomType="x",d.resetZoomButton={theme:{display:"none"}},d.events={},d.events.selection=function(a){x(a)});return d}(r,n);o.credits={enabled:!1};o.legend=function(a){var b={enabled:1<a.Chart.Series.DataFields.length&&!h(a)||f(a),margin:0};"CircularGauge"==a.RealChartType&&(b.labelFormatter=function(){return qv.util.dom.createSpan(null,"","","",{color:J(qv.collection[this.chart.options.qv.viewerId],this.userOptions)},null,
"").outerHTML+" "+this.name},b.symbolWidth=0);return b}(r);o.title=""==r.Title?{text:null}:{text:null==n||0==n?r.Title:null};o.subtitle=function(a,b){var c={};if(h(a)&&(f(a)||"CircularGauge"==a.RealChartType))c.text=b.Name,c.floating=!0,c.align="left",c.verticalAlign="middle";return c}(r,g);o.pane=function(a,b){var c={};if("CircularGauge"==a.RealChartType){c.background=[];var e;h(a)&&(e=B(1,1));var d=0,f;for(f in a.Chart.Series.ByName){if(!h(a)||d==b){var r=a.Chart.Series.ByName[f],g={};h(a)||(e=
B(a.Chart.Series.DataFields.length,d+1));g.outerRadius=e.UpperExtreme.toString()+"%";g.innerRadius=e.LowerExtreme.toString()+"%";r=Y(r.Color)?r.Points[0].Color:r.Color;U(a,g,r,!1);g.borderWidth=0;c.background.push(g)}d++}}return c}(r,n);o.xAxis=function(a,e){xAxis={};if("CircularGauge"!=a.RealChartType){var d=c(a);if("Radar"!=a.RealChartType&&"FilledRadar"!=a.RealChartType&&"PolarArea"!=a.RealChartType&&"LinearGauge"!=a.RealChartType&&"Sparkline"!=a.RealChartType){var f=xAxis,r="";if(""==a.XAxisTitle)for(var g=
0;g<a.Metadata.Axes.length;g++){var k=a.Metadata.Axes[g];if("Rows"==k.AxisType||"Columns"==k.AxisType)r+=(""==r?"":", ")+gx.getMessage(k.Title)}else r=gx.getMessage(a.XAxisTitle);f.title={text:r}}else{"Sparkline"==a.RealChartType&&h(a)&&(xAxis.title={text:a.Chart.Series.ByIndex[e].Name});xAxis.lineWidth=0;if("LinearGauge"==a.RealChartType||"Sparkline"==a.RealChartType)xAxis.tickPositions=[];xAxis.tickmarkPlacement="Radar"==a.RealChartType||"FilledRadar"==a.RealChartType?"on":"between"}if("LinearGauge"==
a.RealChartType){var f=0,l;h(a)&&(l=v(1,1));xAxis.plotBands=[];for(var n in a.Chart.Series.ByName){if(!h(a)||f==e)r=a.Chart.Series.ByName[n],h(a)||(l=v(a.Chart.Series.DataFields.length,f+1)),plotBand={},r=Y(r.Color)?r.Points[0].Color:r.Color,U(a,plotBand,r,!1),plotBand.from=l.LowerExtreme,plotBand.to=l.UpperExtreme,xAxis.plotBands.push(plotBand);f++}}d||(xAxis.categories=[]);l=!1;for(f=0;f<a.Chart.Categories.Values.length;f++)""!=a.Chart.Categories.Values[f].ValueWithPicture&&(l=!0),d||(xAxis.categories[f]=
a.Chart.Categories.Values[f].ValueWithPicture);if(d)xAxis.type="datetime",xAxis.id="xaxis",xAxis.minRange=1,"date"==O(a)&&(null!=a.Chart.Categories.MaxValue&&null!=a.Chart.Categories.MinValue)&&(d=new gx.date.gxdate(a.Chart.Categories.MinValue,"Y4MD"),864E6>(new gx.date.gxdate(a.Chart.Categories.MaxValue,"Y4MD")).Value.getTime()-d.Value.getTime()&&(xAxis.tickInterval=864E5));else if(xAxis.labels={},xAxis.labels.enabled=l,"Horizontally"!=a.XAxisLabels&&!("Bar"==a.RealChartType||"StackedBar"==a.RealChartType||
"StackedBar100"==a.RealChartType)&&!b(a))"Vertically"==a.XAxisLabels?(d=90,l=5):(d=parseInt(a.XAxisLabels.replace("Rotated","")),l=10),xAxis.labels.rotation=360-d,xAxis.labels.y=l,xAxis.labels.align="right";b(a)?xAxis.className="highcharts-no-axis-line highcharts-yes-grid-line":"Sparkline"==a.RealChartType&&(xAxis.className="highcharts-no-axis-line highcharts-no-grid-line")}return xAxis}(r,n);o.yAxis=function(a,b){if("Sparkline"==a.RealChartType)yAxis={visible:!1};else{var c;"CircularGauge"==a.RealChartType?
c=null:h(a)?c=b.Name:(c="",""==a.YAxisTitle?1==a.Chart.Series.DataFields.length&&(c=da(a,a.Chart.Series.DataFields[0]).Title,c=gx.getMessage(c)):c=gx.getMessage(a.YAxisTitle));p(a)&&!h(a)?(yAxis=[],yAxis[0]={title:{text:c}},yAxis[1]={title:{text:""},opposite:!0}):yAxis={title:{text:c}};yAxis.plotLines=[];yAxis.plotBands=[];if(!d(a)&&!("Funnel"==a.RealChartType||"Pyramid"==a.RealChartType)&&!m(a))for(var e=0;e<a.Chart.PlotBands.length;e++){var f=a.Chart.PlotBands[e];if(null==b||b.Name==f.SeriesName)f.From==
f.To&&null!=f.From?(c={value:f.From,width:1,zIndex:3},U(a,c,f.Color,!1),yAxis.plotLines.push(c)):(c={},U(a,c,f.Color,!1),c.from=!f.From?Number.MIN_VALUE:f.From,c.to=!f.To?Number.MAX_VALUE:f.To,yAxis.plotBands.push(c))}if("Radar"==a.RealChartType||"FilledRadar"==a.RealChartType||"PolarArea"==a.RealChartType)yAxis.min=0,yAxis.gridLineInterpolation="Radar"==a.RealChartType||"FilledRadar"==a.RealChartType?"polygon":"circle";if(m(a)){yAxis.min=0;yAxis.max=0;for(var r in a.Chart.Series.ByName)if(!h(a)||
r==b.Name)c=a.Chart.Series.ByName[r],yAxis.max=Math.max(yAxis.max,100*c.MaximumValue/c.TargetValue);if("LinearGauge"==a.RealChartType||100!=yAxis.max){c={className:"highcharts-dashed-plot-line",value:100};if(h(a)||1==a.Chart.Series.DataFields.length){var e=h(a)?b:a.Chart.Series.ByIndex[0],g,k;"LinearGauge"==a.RealChartType?(f=-10,g=-5,k="right"):(f=15,g=0,k="center");c.label={text:e.TargetValue,verticalAlign:"bottom",rotation:0,y:f,x:g,align:k}}yAxis.plotLines.push(c)}}"LinearGauge"==a.RealChartType?
(yAxis.className="highcharts-no-axis-line highcharts-no-grid-line",yAxis.labels={enabled:!1}):"CircularGauge"==a.RealChartType&&(yAxis.lineWidth=0,yAxis.tickPositions=[]);if(gx.lang.gxBoolean(a.XAxisIntersectionAtZero)){f=e=!1;for(r in a.Chart.Series.ByName)c=a.Chart.Series.ByName[r],c.PositiveValues&&(e=!0),c.NegativeValues&&(f=!0);f||(p(a)&&!h(a)?(yAxis[0].min=0,yAxis[1].min=0):yAxis.min=0);e||(p(a)&&!h(a)?(yAxis[0].max=0,yAxis[1].max=0):yAxis.max=0)}}return yAxis}(r,g);o.plotOptions=function(b,
c){function e(a){var b;b=h(a)||1==a.Chart.Series.DataFields.length?23*(h(a)?a.Chart.Series.DataFields.length:1):29;return a.getContainerControl().offsetHeight-b}function f(a){var b={radius:1,symbol:"circle",states:{hover:{radius:4}}};a.SelectionAllowed()&&(b.states.select={radius:5,lineWidth:1},a.SelectionColor&&(b.states.select.fillColor=a.SelectionColor));return b}var r=gx.lang.gxBoolean(c.ShowValues),g={series:{}},k=d(c)&&!c.SelectionColor?"#CCCCCC":c.SelectionColor;c.SelectionAllowed()&&k&&(g.series.states=
{select:{color:k}});g.series.events={};"CircularGauge"==c.RealChartType?(g.series.dataLabels={},g.series.dataLabels.enabled=1==c.Chart.Series.DataFields.length&&gx.lang.gxBoolean(c.ShowValues)||h(c),g.series.dataLabels.y=0,g.series.dataLabels.borderWidth=0,g.series.dataLabels.formatter=function(){return t(this,c)},g.series.marker={enabled:!1}):r&&(g.series.dataLabels={},g.series.dataLabels.enabled=!0,g.series.dataLabels.connectorColor="#000000",g.series.dataLabels.formatter=function(){var a=c.Chart.Series.ByName[this.series.name];
return qv.util.formatNumber(this.point.y*(c.RealChartType=="LinearGauge"?a.TargetValue/100:1),a.NumberFormat.DecimalPrecision,a.Picture,false)},"LinearGauge"==c.RealChartType&&(g.series.dataLabels.inside=!0));if(h(c)&&"CircularGauge"!=c.RealChartType){g.series.point={};g.series.point.events={};var l="LinearGauge"!=c.RealChartType;g.series.point.events.mouseOver=function(){q(c,this.series.chart.container,this.index,true,l)};g.series.point.events.mouseOut=function(){q(c,this.series.chart.container,
this.index,false,l)}}if(c.ItemClick||c.SelectionAllowed())g.series.events.click=y;switch(b){case "bar":g.bar={};"StackedBar"==c.RealChartType?(g.series.stacking="normal",g.bar.stacking="normal"):"StackedBar100"==c.RealChartType&&(g.series.stacking="percent",g.bar.stacking="percent");if("LinearGauge"==c.RealChartType){r=v(c.Chart.Series.DataFields.length,1).Width*e(c);g.bar.pointWidth=r;g.bar.pointPadding=0;g.bar.groupPadding=0;for(var k=Number.MAX_VALUE,n=0;n<c.Chart.Series.DataFields.length;n++){var m=
c.Chart.Series.ByIndex[n],m=m.Points[0].Value/m.TargetValue;m<k&&(k=m)}k*=c.getContainerControl().offsetWidth;g.bar.borderRadius=Math.min(r/2,k/2)}break;case "column":g.column={};"StackedColumn"==c.RealChartType||"StackedColumn3D"==c.RealChartType||"PolarArea"==c.RealChartType?(g.series.stacking="normal",g.column.stacking="normal"):"StackedColumn100"==c.RealChartType&&(g.series.stacking="percent",g.column.stacking="percent");"PolarArea"==c.RealChartType&&(g.column.pointPadding=0,g.column.groupPadding=
0);break;case "area":g.area={};"StepArea"==c.RealChartType&&(g.area.step="center");g.area.marker=f(c);"StackedArea"==c.RealChartType?g.area.stacking="normal":"StackedArea100"==c.RealChartType&&(g.area.stacking="percent");break;case "areaspline":g.areaspline={};g.areaspline.marker=f(c);break;case "line":g.line={};g.line.marker=f(c);"StepLine"==c.RealChartType?g.line.step="center":"StepTimeline"==c.RealChartType&&(g.line.step="left");a(c)?g.series.connectNulls=!0:"StackedLine"==c.RealChartType?g.line.stacking=
"normal":"StackedLine100"==c.RealChartType&&(g.line.stacking="percent");break;case "spline":g.spline={};g.spline.marker=f(c);break;case "pie":g.pie={};if("Doughnut"==c.RealChartType||"Doughnut3D"==c.RealChartType)g.pie.innerSize="35%";if("Pie3D"==c.RealChartType||"Doughnut3D"==c.RealChartType)g.pie.depth=35;g.pie.dataLabels={enabled:r};g.pie.showInLegend=!0;break;case "solidgauge":g.solidgauge={};g.solidgauge.showInLegend=!0;g.solidgauge.rounded=!0;break;case "funnel":g.funnel={};g.funnel.showInLegend=
!0;g.funnel.dataLabels={enabled:r};break;case "pyramid":g.pyramid={},g.pyramid.showInLegend=!0,g.pyramid.dataLabels={enabled:r}}return g}(o.chart.type,r);o.tooltip=function(b){var c={};a(b)?(c.borderRadius=1,c.shadow=!0,c.shared=!0,c.useHTML=!1,c.formatter=function(){return D(this,b.Chart.Series.ByName)}):"StackedColumn100"==b.RealChartType||"StackedBar100"==b.RealChartType||"StackedArea100"==b.RealChartType||"StackedLine100"==b.RealChartType?c.formatter=function(){return"<b>"+(""!=this.point.id?
this.point.id:this.series.name)+"</b>: "+Math.round(100*this.point.percentage)/100+"%"}:d(b)?c.formatter=function(){var a;if(h(b)){a=qv.collection[this.point.series.chart.options.qv.viewerId];var c=f(a),e=l(a,this.point.index),d=0<e.length?e[0].id:"",g=""!=d,r="";g&&(r+=A(d,c?J(a,this):""));for(d=0;d<e.length;d++)var k=e[d],r=r+((g||0<d?"<br/>":"")+A(k.series.name+": ",c?"":J(a,k.series))),k=Math.round(100*k.percentage)/100,r=r+(k+"%");a=r}else k=Math.round(100*this.point.percentage)/100,a="<b>"+
(""!=this.point.name?this.point.name:this.point.series.name)+"</b>: "+k+"%";return a}:"CircularGauge"==b.RealChartType?(c.enabled=(1<b.Chart.Series.DataFields.length||!gx.lang.gxBoolean(b.ShowValues))&&!h(b),c.formatter=function(){return t(this,b)},c.positioner=function(a){return{x:(this.chart.plotWidth-a)/2,y:this.chart.plotHeight/2}}):c.formatter=function(){var a;var c=b.Chart.Series.ByName;if(!h(b)||m(b)){a=qv.collection[this.series.chart.options.qv.viewerId];var e=c[this.series.name],c=m(a)?"ZZZZZZZZZZZZZZ9.99":
e.Picture,d=m(a)?2:e.NumberFormat.DecimalPrecision,e=m(a);a="<b>"+(""!=this.point.id?this.point.id:this.series.name)+"</b>: "+qv.util.formatNumber(this.point.y,d,c,e)+(m(a)?"%":"")}else{this.points?(a=this.points[0],e=a.point.index):(a=this.point,e=a.index);a=qv.collection[a.series.chart.options.qv.viewerId];var d=f(a),g=l(a,e),e=!this.key?!this.x?"":this.x:this.key,r=""!=e&&"Sparkline"!=a.RealChartType,k="";r&&(k+=A(e,d?J(a,this):""));for(var n=0;n<g.length;n++)var o=g[n],e=c[o.series.name],k=k+
((r||0<n?"<br/>":"")+A(o.series.name+": ",d?"":J(a,o))),k=k+qv.util.formatNumber(o.y,e.NumberFormat.DecimalPrecision,e.Picture,!1);a=k}return a};return c}(r);o.series=function(b,e,d){var f=[],g=0,r;for(r in b.Chart.Series.ByName){if(!h(b)||g==e){var k;k=b;var l=b.Chart.Series.ByName[r],n=g,o=d,s={};if(k.ItemClick||k.SelectionAllowed())s.className="highcharts-drilldown-point";if(a(k)){s.name=l.Name;s.data=[];s.turboThreshold=0;Y(l.Color)||U(k,s,l.Color,!0);o=H(k.Chart.Categories,l.Points,O(k),l.Aggregation,
o);for(j=0;j<o.length;j++){var n=o[j].name,Q=o[j].x,t=o[j].y,Q=new gx.date.gxdate(Q,"Y4MD");s.data[j]={x:Q.Value.getTime()-6E4*Q.Value.getTimezoneOffset(),y:t,name:n};Y(l.Color)&&U(k,s.data[j],l.Points[j].Color,!0)}}else{o=void 0;"CircularGauge"==k.RealChartType&&(o=h(k)?B(1,1):B(k.Chart.Series.DataFields.length,n+1));s.name=l.Name;s.data=[];s.turboThreshold=0;Y(l.Color)||U(k,s,l.Color,!0);if("Radar"==k.RealChartType||"FilledRadar"==k.RealChartType||"PolarArea"==k.RealChartType)s.pointPlacement="Radar"==
k.RealChartType||"FilledRadar"==k.RealChartType?"on":null;for(j=0;j<l.Points.length;j++)(t=null!=l.Points[j].Value?parseFloat(qv.util.trim(l.Points[j].Value).replace(",",".")):null,m(k)&&(t=100*(t/l.TargetValue)),n=k.Chart.Categories.Values[j].ValueWithPicture,s.data[j]={},s.data[j].y=t,s.data[j].name=m(k)?"":n,s.data[j].id=s.data[j].name,c(k)&&(Q=k.Chart.Categories.Values[j].Value,Q=new gx.date.gxdate(Q,"Y4MD"),s.data[j].x=Q.Value.getTime()-6E4*Q.Value.getTimezoneOffset(),s.data[j].id=Q),"CircularGauge"==
k.RealChartType&&(s.data[j].radius=o.UpperExtreme.toString()+"%",s.data[j].innerRadius=o.LowerExtreme.toString()+"%"),"CircularGauge"==k.RealChartType)?(n=Y(l.Color)?l.Points[0].Color:l.Color,U(k,s.data[j],n,!0)):Y(l.Color)&&U(k,s.data[j],l.Points[j].Color,!0)}k=s;l=null!=e?e:g;p(b)&&(0==l%2?(k.type="column",k.yAxis=0):(k.type="line",k.yAxis=h(b)?0:1));f.push(k)}g++}return f}(r,n,s);return o}function da(a,b){for(var c=0;c<a.Metadata.Data.length;c++)if(a.Metadata.Data[c].DataField==b)return a.Metadata.Data[c]}
function X(a,b){for(var c=0;c<a.Metadata.Axes.length;c++)if(a.Metadata.Axes[c].DataField==b)return a.Metadata.Axes[c]}function O(a){for(var b=0,c="",e=0;e<a.Metadata.Axes.length;e++){var d=a.Metadata.Axes[e];if("Rows"==d.AxisType||"Columns"==d.AxisType)b++,c=d.DataType}return 1==b?c:"character"}function M(a){return!isNaN(parseFloat(a))&&isFinite(a)?gx.dom.el(Z+"_Zoom_"+a+"m"):gx.dom.el(a)}function L(a,b){if(zoom=M(a))zoom.style.textDecoration=b}function xa(a){if(zoom=M(a))zoom.onclick();else if(0!=
a){var b;switch(a){case 12:b=6;break;case 6:b=3;break;case 3:b=2;break;case 2:b=1;break;case 1:b=0}xa(b)}}function ya(a,b){gx.dom.el(a+"_options_compare_enable").disabled=!b;gx.dom.el(a+"_options_compare_text").disabled=!b;gx.dom.el(a+"_options_compare_text").style.opacity=!b?0.5:1;gx.dom.el(a+"_options_compare_options").disabled=!b;gx.dom.el(a+"_options_compare_options").style.opacity=!b?0.5:1}function ba(a){return a+"_options"}function ga(a){return a+"_center"}function aa(a){return a+"_footer_slider"}
function sa(a){return a+"_footer_chart"}function fa(a){return a+"_footer_range"}function la(a){return a+"_footer_left_cursor"}function ma(a){return a+"_footer_right_cursor"}function ha(a){return a+"_footer_center"}function qa(a,b,c){var e=Math.max(b,0),b=Math.min(e,100),e=Math.max(c,0),c=Math.min(e,100);$("#"+(a+"_footer")).css("width","100%").css("height",V.toString()+"px");$("#"+sa(a)).css("width","100%").css("height",(V-2).toString()+"px");e=qv.collection[a].getContainerControl().offsetWidth;b=
b*e/100;c=(100-c)*e/100;if(e-b-c<2*W){var d=2*W-(e-b-c),f;f=0==d%2?d/2:(d+1)/2;b-=f;c-=d-f;0>b&&(c+=b,b=0);0>c&&(b+=c,c=0)}$("#"+aa(a)).css("width","100%").css("height",V.toString()+"px").css("padding-left",(100*b/e).toString()+"%").css("padding-right",(100*c/e).toString()+"%");$("#"+fa(a)).css("width","100%").css("height",V.toString()+"px");$("#"+la(a)).css("width",W.toString()+"px").css("height",V.toString()+"px");$("#"+ma(a)).css("width",W.toString()+"px").css("height",V.toString()+"px");$("#"+
ha(a)).css("width","calc(100% - "+2*W+"px)").css("height",V.toString()+"px").css("left",W.toString()+"px")}function za(a,b){var c=parseInt($("#"+aa(a)).css("padding-left")),e=parseInt($("#"+fa(a)).css("width")),d;d=b.originalEvent.touches?b.originalEvent.touches[0].pageX-b.originalEvent.touches[0].target.offsetLeft:b.offsetX;switch(b.target.id){case aa(a):return d;case la(a):return d+c;case ha(a):return d+c;case ma(a):return d+c+e-W}}function Ca(b){function c(a){a.preventDefault();P=b;var e=$("#"+
aa(P)),d=$("#"+fa(P));parseInt(e.css("padding-left"));Aa=za(P,a);na=parseInt(e.css("padding-left"));ta=parseInt(e.css("padding-right"));oa=parseInt(e.css("width"));ua=parseInt(d.css("width"))}function e(){if(ia||R||S){var b=$("#"+aa(P)),c=qv.collection[P],d=gx.dom.el(P+"_options_compare_enable").checked,f=c.getContainerControl().offsetWidth,g;g=a(c)?ga(c.userControlId()):c.getContainerControl().id;var c=h(c)?$("[id^="+g+"_chart]"):$("#"+g),k=[];$.each(c,function(a,b){var c=$("#"+b.id).highcharts();
k.push(c)});c=k[0];g=parseInt(b.css("padding-left"));var r=parseInt(b.css("padding-right")),b=100*g/f,f=100*(1-r/f);if(0==b&&100==f)$.each(k,function(a,b){b.zoomOut()});else{c.get("xaxis").getExtremes();var c=c.options.qv,l=c.dataMin+b/100*(c.dataMax-c.dataMin),n=c.dataMin+f/100*(c.dataMax-c.dataMin),u=d?!1:!0;$.each(k,function(a,b){b.get("xaxis").setExtremes(l,n,u)})}d&&ja(k);if(R||S)L(ea,"none"),ea=null}R=S=ia=!1}function d(a){if(ia||R||S)if(a=za(P,a)-Aa,a=S?Math.min(a,ua-2*W):Math.min(a,ta),a=
R?Math.max(a,-ua+2*W):Math.max(a,-na),0!=a){$("#"+ha(P));var b=$("#"+aa(P));$("#"+fa(P));S?b.css("padding-left",(100*(na+a)/oa).toString()+"%"):(R||b.css("padding-left",(100*(na+a)/oa).toString()+"%"),b.css("padding-right",(100*(ta-a)/oa).toString()+"%"))}}var f=$("#"+la(b)),g=$("#"+ma(b)),k=$("#"+ha(b)),l=$("#"+aa(b));$("#"+fa(b));f.mousedown(function(a){a.preventDefault();S=!0});g.mousedown(function(a){a.preventDefault();R=!0});k.mousedown(function(a){a.preventDefault();!S&&!R&&(ia=!0)});l.mousedown(function(a){c(a)});
$(document).mouseup(function(a){e(a)});l.mousemove(function(a){d(a)});f.on("touchstart",function(a){a.preventDefault();S=!0});g.on("touchstart",function(a){a.preventDefault();R=!0});k.on("touchstart",function(a){a.preventDefault();!S&&!R&&(ia=!0)});l.on("touchstart",function(a){c(a)});$(document).on("touchend",function(a){e(a)});$(document).on("touchcancel",function(a){e(a)});l.on("touchmove",function(a){d(a)})}function Da(a,b){var c=qv.util.dom.createDiv(a,aa(b),"gx-qv-footer-slider","",{},""),c=
qv.util.dom.createDiv(c,fa(b),"gx-qv-footer-range","",{},"");qv.util.dom.createDiv(c,la(b),"gx-qv-footer-left-cursor","",{},"");qv.util.dom.createDiv(c,ma(b),"gx-qv-footer-right-cursor","",{},"");qv.util.dom.createDiv(c,ha(b),"gx-qv-footer-center","",{},"");qv.util.dom.createDiv(a,sa(b),"gx-qv-footer-chart","",{},"")}function Ea(a,b){var c=sa(a.userControlId()),e="SmoothTimeline"==a.RealChartType?"spline":"line",d="StepTimeline"==a.RealChartType?"left":"",f=[];if(h(a))for(g=0;g<b.length;g++)f.push(b[g].series[0]);
else for(var g=0;g<b[0].series.length;g++)f.push(b[0].series[g]);return qv.chart.getSparklineChartOptions(a,c,e,!1,d,f)}function ja(a){var b=a[0],c=b.options.qv.viewerId,e=qv.collection[c],d=gx.dom.el(c+"_options_compare_enable").checked;$.each(a,function(a,b){b.options.qv.comparing=d});var f=b.get("xaxis").getExtremes();void 0!=f.userMin&&(f.min=f.userMin);void 0!=f.userMax&&(f.max=f.userMax);if(d){var g=gx.dom.el(c+"_options_compare_options").children,k;for(ind=0;void 0!=g[ind]&&void 0==k;ind++)g[ind].selected&&
(k=g[ind].value);var l,n;"PrevPeriod"==k?(n=new Date(f.min),l=new Date(f.min-(f.max-f.min))):"PrevYear"==k&&(l=new Date(f.min),l=new Date(l.setFullYear(l.getFullYear()-1)),n=new Date(f.max),n=new Date(n.setFullYear(n.getFullYear()-1)));l=l.getTime();n=n.getTime();if(zoom=M(c+"_Zoom_0m"))zoom.style.display="none"}else if(zoom=M(c+"_Zoom_0m"))zoom.style.display="";$.each(a,function(a,b){for(var c=[];b.series.length>0;){b.options.qv.colorIndexesUsed||c.push(b.series[0].colorIndex);b.series[0].remove(true)}if(!b.options.qv.colorIndexesUsed)b.options.qv.colorIndexesUsed=
c});var g=0,s;for(s in e.Chart.Series.ByName){var m=e.Chart.Series.ByName[s],o,t;h(e)?(o=a[g],t=o.options.qv.colorIndexesUsed[0]):(o=b,t=o.options.qv.colorIndexesUsed[g]);var p={turboThreshold:0};p.colorIndex=t;p.id=s+"1";p.name=s;p.data=[];if(d){var q={className:"highcharts-dashed-series-line",turboThreshold:0};q.colorIndex=t;q.id=s+"2";q.name=s;q.data=[]}t=document.getElementById(c+"_options_group_options").value;m=H(e.Chart.Categories,m.Points,O(e),m.Aggregation,t);for(i=0;i<m.length;i++){t=m[i].y;
var v=new gx.date.gxdate(m[i].x,"Y4MD"),A=m[i].name,w=v.Value.getTime()-6E4*v.Value.getTimezoneOffset(),v=v.Value.getTime()-6E4*v.Value.getTimezoneOffset();if(d){var x=!1,y=!1;w<=f.max&&w>=f.min&&(x=!0);if(w<=n&&w>=l){var y=!0,z=new Date(w),B;"PrevPeriod"==k?B="1m"==o.options.qv.predef_zoom?z.setMonth(z.getMonth()+1):"2m"==o.options.qv.predef_zoom?z.setMonth(z.getMonth()+2):"3m"==o.options.qv.predef_zoom?z.setMonth(z.getMonth()+3):"6m"==o.options.qv.predef_zoom?z.setMonth(z.getMonth()+6):"12m"==o.options.qv.predef_zoom?
z.setFullYear(z.getFullYear()+1):B+(f.max-f.min):"PrevYear"==k&&(B=z.setFullYear(z.getFullYear()+1))}x&&(x={},x.x=w,x.y=t,x.name=A,p.data.push(x));y&&(x={},x.x=B,x.y=t,x.name=A,x.real_x=v,q.data.push(x))}else p.data.push({x:w,y:t,name:A})}o.addSeries(p);d&&o.addSeries(q);g++}}function Fa(a,b){if(a.length<b)return 0;var c=(a[a.length-1].x-a[a.length-b].x)/1E3/3600/24/(365/12);return 1>=c?1:2>=c?2:3>=c?3:6>=c?6:12}function Ga(a,b){function c(a,b,e,d,f,g,k,h,l){var r=b.userControlId(),a=qv.util.dom.createSelect(a,
ba(r)+"_group_options");"datetime"==O(b)&&(qv.util.dom.createOption(a,"Seconds","Seconds"==b._groupOption,gx.getMessage("GXPL_QViewerSeconds")),l&&(qv.util.dom.createOption(a,"Minutes","Minutes"==b._groupOption,gx.getMessage("GXPL_QViewerMinutes")),h&&qv.util.dom.createOption(a,"Hours","Hours"==b._groupOption,gx.getMessage("GXPL_QViewerHours"))));if(A||"date"==O(b))qv.util.dom.createOption(a,"Days","Days"==b._groupOption,gx.getMessage("GXPL_QViewerDays")),k&&(qv.util.dom.createOption(a,"Weeks","Weeks"==
b._groupOption,gx.getMessage("GXPL_QViewerWeeks")),g&&(qv.util.dom.createOption(a,"Months","Months"==b._groupOption,gx.getMessage("GXPL_QViewerMonths")),f&&(qv.util.dom.createOption(a,"Quarters","Quarters"==b._groupOption,gx.getMessage("GXPL_QViewerQuarters")),d&&(qv.util.dom.createOption(a,"Semesters","Semesters"==b._groupOption,gx.getMessage("GXPL_QViewerSemesters")),e&&qv.util.dom.createOption(a,"Years","Years"==b._groupOption,gx.getMessage("GXPL_QViewerYears"))))));return a}var e=a[0];Z=e.options.qv.viewerId;
var d=qv.collection[Z],f=document.getElementById(ba(Z)),g=document.getElementById(Z+"_footer"),k=e.get("xaxis").getExtremes(),h=k.dataMax-k.dataMin;$.each(a,function(a,b){b.options.qv.dataMax=k.dataMax;b.options.qv.dataMin=k.dataMin});var l=2628288E3<h,n=5255712E3<h,m=7884E6<h,s=15768E6<h,h=31536E6<h;d._groupOption=d._groupOption||("date"==O(d)?"Days":"Seconds");var o=new gx.date.gxdate(""),t=new gx.date.gxdate("");o.Value.setTime(k.dataMin+6E4*o.Value.getTimezoneOffset());t.Value.setTime(k.dataMax+
6E4*t.Value.getTimezoneOffset());var p=!0,q=!0,v=!0,x=!0,w=!0,A=!0,z=!0,y=!0;gx.date.year(o)==gx.date.year(t)&&(p=!1,6>=gx.date.month(o)&&7<=gx.date.month(t)||(q=!1,3>=gx.date.month(o)&&4<=gx.date.month(t)||(6>=gx.date.month(o)&&7<=gx.date.month(t)||9>=gx.date.month(o)&&10<=gx.date.month(t))||(v=!1,gx.date.month(o)==gx.date.month(t)&&(x=!1,gx.date.day(o)-gx.date.dow(o)==gx.date.day(t)-gx.date.dow(t)&&(w=!1,gx.date.day(o)==gx.date.day(t)&&(A=!1,gx.date.hour(o)==gx.date.hour(t)&&(z=!1,gx.date.minute(o)==
gx.date.minute(t)&&(y=!1))))))));(function(a,b,e,d,f,g,k,h,l,r,n,o,m,s){function t(a){return qv.util.dom.createDiv(a,"","QVTimelineHeaderGroup","",{height:va+"px",flexGrow:1},"")}function u(a,b,c){return qv.util.dom.createAnchor(a,c,{cursor:"pointer",paddingLeft:"6px"},b)}var p=b.userControlId(),a=qv.util.dom.createDiv(a,"","QVTimelineHeader","",{display:"flex",flexDirection:"row",flexWrap:"wrap"},""),q=t(a),v=t(a),x=t(a),q=qv.util.dom.createDiv(q,"","","",{"float":"left"},"");qv.util.dom.createText(q,
gx.getMessage("GXPL_QViewerJSChartZoom"));if(e){u(q,gx.getMessage("GXPL_QViewerJSChartZoomLevelToOneMonth"),p+"_Zoom_1m");if(d){u(q,gx.getMessage("GXPL_QViewerJSChartZoomLevelToTwoMonth"),p+"_Zoom_2m");if(f){u(q,gx.getMessage("GXPL_QViewerJSChartZoomLevelToThreeMonth"),p+"_Zoom_3m");if(g){u(q,gx.getMessage("GXPL_QViewerJSChartZoomLevelToSixMonth"),p+"_Zoom_6m");k&&u(q,gx.getMessage("GXPL_QViewerJSChartZoomLevelToOneYear"),p+"_Zoom_12m")}}}}u(q,gx.getMessage("GXPL_QViewerJSChartZoomLevelToAll"),p+
"_Zoom_0m");e=qv.util.dom.createDiv(v,"","","",{"float":"right",paddingLeft:"12px"},"");qv.util.dom.createSpan(e,ba(p)+"_groupby_text","","",{whiteSpace:"nowrap",paddingRight:"6px"},null,gx.getMessage("GXPL_QViewerGroupBy"));c(e,b,h,l,r,n,o,m,s);b=qv.util.dom.createDiv(x,"","","",{"float":"right",paddingLeft:"12px"},"");qv.util.dom.createInput(b,ba(p)+"_compare_enable","checkbox",{verticalAlign:"sub"});qv.util.dom.createSpan(b,ba(p)+"_compare_text","","",{whiteSpace:"nowrap",paddingRight:"6px",paddingLeft:"6px"},
null,gx.getMessage("GXPL_QViewerCompareWith"));p=qv.util.dom.createSelect(b,ba(p)+"_compare_options");qv.util.dom.createOption(p,"PrevPeriod",false,gx.getMessage("GXPL_QViewerPreviousPeriod"));qv.util.dom.createOption(p,"PrevYear",false,gx.getMessage("GXPL_QViewerPreviousYear"));return a})(f,d,l,n,m,s,h,p,q,v,x,w,z,y);Da(g,Z);Ca(Z);gx.dom.el(f.id+"_compare_enable").onclick=function(){ja(a)};gx.dom.el(f.id+"_compare_options").onchange=function(){gx.dom.el(f.id+"_compare_enable").checked&&ja(a)};gx.dom.el(f.id+
"_group_options").onchange=function(){ja(a)};var g=function(b){var c=gx.dom.el(f.id+"_compare_enable").checked;if(b>0){var d,g;g=e.get("xaxis").getExtremes().dataMax;d=g-b*2628028800;var k=c?false:true;$.each(a,function(a,b){b.get("xaxis").setExtremes(d,g,k)});var h=e.options.qv;qa(e.options.qv.viewerId,(d-h.dataMin)/(h.dataMax-h.dataMin)*100,(g-h.dataMin)/(h.dataMax-h.dataMin)*100);ya(e.options.qv.viewerId,true)}else{$.each(a,function(a,b){b.zoomOut()});ya(e.options.qv.viewerId,false)}L(ea,"none");
L(this.id,"underline");$.each(a,function(a,c){c.options.qv.predef_zoom=b+"m"});ea=this.id;c&&ja(a)},l=[0,1,2,3,6,12],B;for(B in l)if(n=l[B],m=gx.dom.el(Z+"_Zoom_"+n+"m"))m.onclick=g.closure(m,[n]);B=Fa(e.series[0].points,20);xa(B);d=Ea(d,b);new Highcharts.Chart(d)}function Ha(b){var c=qv.collection[b.options.qv.viewerId];if(c.ItemClick||c.SelectionAllowed())a(c)||$("g.highcharts-xaxis-labels > text").css({cursor:"pointer"}),jQuery.each(b.xAxis[0].ticks,function(c,e){if(e&&e.label)e.label.on("click",
function(){var d=qv.collection[b.options.qv.viewerId],f=!1;d.SelectionAllowed()&&!a(d)&&(f=s(d.Charts,e.pos));if(d.ItemClick){var h;h=1==d.Chart.Categories.DataFields.length?X(d,d.Chart.Categories.DataFields[0]).Name:"";g(d.ItemClickData,d,h,"Row",e.label.textStr,f,d.Data.Rows[c]);d.ItemClick()}})})}var ea=null,Z=null,va=35,V=50,W=10,Aa=0,P="",na=0,ta=0,ua=0,oa=0,S=!1,R=!1,ia=!1;return{tryToRenderChart:function(b){var c="";(new Date).getTime();b.xml=b.xml||{};qv.services.GetRecordsetCacheKeyIfNeeded(b,
function(b,e){var d=!1;b!=e.xml.recordsetCacheKey&&(e.xml.recordsetCacheKey=b,d=!0);qv.util.anyError(b)?(c=qv.util.getErrorFromText(b),qv.util.renderError(e,c)):(d&&qv.services.parseRecordsetCacheKeyXML(e),qv.services.GetMetadataIfNeeded(e,function(b,e){var d=false;if(b!=e.xml.metadata){e.xml.metadata=b;d=true}(new Date).getTime();if(qv.util.anyError(b)){c=qv.util.getErrorFromText(b);qv.util.renderError(e,c)}else{d&&qv.services.parseMetadataXML(e);qv.services.GetDataIfNeeded(e,function(b,e){var d=
false;if(b!=e.xml.data){e.xml.data=b;d=true}(new Date).getTime();if(qv.util.anyError(b)){c=qv.util.getErrorFromText(b);qv.util.renderError(e,c)}else{d&&qv.services.parseDataXML(e);d=qv.util.GetContainerControlClasses(e);d!=""&&qv.util.SetUserControlClass(e,d);K(e);var f=e.userControlId(),d=qv.util.dom.getEmptyContainer(e);if((a(e)||h(e))&&d.offsetHeight==0)d.style.height="400px";if(a(e)){qv.util.dom.createDiv(d,ba(f),"QVTimelineHeaderContainer","",{width:"100%",height:va+"px"},"");var g=qv.util.dom.createDiv(d,
ga(f),"","",{width:"100%",height:"calc(100% - "+va+"px - "+V+"px)"},"");qv.util.dom.createDiv(d,f+"_footer","gx-qv-footer","",{width:"100%",height:V+"px"},"");d.style.padding=DEFAULTCHARTSPACING+"px";d=g}if(h(e))for(var g=e.Chart.Series.DataFields.length,k=parseInt(100/g),l=100%g,f=a(e)?ga(f):f,r=0;r<g;r++)qv.util.dom.createDiv(d,f+"_chart"+r.toString(),"","",{width:"100%",height:(k+(r<l?1:0)).toString()+"%"},"");d=[];if(h(e)){var g=0,n;for(n in e.Chart.Series.ByName){k=wa(e,e.Chart.Series.ByName[n],
g);d.push(k);g++}}else{k=wa(e,null,null);d.push(k)}if(e.RealChartType=="CircularGauge"){n=ca(e);n.insertRule("#"+e.ContainerName+" .highcharts-tooltip-box {fill: none !important; stroke-width: 0 !important; }",n.cssRules.length)}Highcharts.setOptions({lang:{months:[gx.getMessage("GXPL_QViewerJanuary"),gx.getMessage("GXPL_QViewerFebruary"),gx.getMessage("GXPL_QViewerMarch"),gx.getMessage("GXPL_QViewerApril"),gx.getMessage("GXPL_QViewerMay"),gx.getMessage("GXPL_QViewerJune"),gx.getMessage("GXPL_QViewerJuly"),
gx.getMessage("GXPL_QViewerAugust"),gx.getMessage("GXPL_QViewerSeptember"),gx.getMessage("GXPL_QViewerOctober"),gx.getMessage("GXPL_QViewerNovember"),gx.getMessage("GXPL_QViewerDecember")],weekdays:[gx.getMessage("GXPL_QViewerSunday"),gx.getMessage("GXPL_QViewerMonday"),gx.getMessage("GXPL_QViewerTuesday"),gx.getMessage("GXPL_QViewerWednesday"),gx.getMessage("GXPL_QViewerThursday"),gx.getMessage("GXPL_QViewerFriday"),gx.getMessage("GXPL_QViewerSaturday")],shortMonths:[gx.getMessage("GXPL_QViewerJanuary").substring(0,
3),gx.getMessage("GXPL_QViewerFebruary").substring(0,3),gx.getMessage("GXPL_QViewerMarch").substring(0,3),gx.getMessage("GXPL_QViewerApril").substring(0,3),gx.getMessage("GXPL_QViewerMay").substring(0,3),gx.getMessage("GXPL_QViewerJune").substring(0,3),gx.getMessage("GXPL_QViewerJuly").substring(0,3),gx.getMessage("GXPL_QViewerAugust").substring(0,3),gx.getMessage("GXPL_QViewerSeptember").substring(0,3),gx.getMessage("GXPL_QViewerOctober").substring(0,3),gx.getMessage("GXPL_QViewerNovember").substring(0,
3),gx.getMessage("GXPL_QViewerDecember").substring(0,3)]}});n=[];for(g=0;g<d.length;g++){HCChart=new Highcharts.Chart(d[g],Ha);n.push(HCChart)}e.Charts=n;a(e)&&Ga(n,d);e._ControlRenderedTo=e.RealType;qv.util.hideActivityIndicator(e)}})}}))})},GetMetadataChart:function(a){return qv.util.GetDesigntimeMetadata(a)},GetDataChart:function(a){return a.xml.data},getSparklineChartOptions:function(a,b,c,e,d,f){a={chart:{}};a.chart.renderTo=b;a.chart.margin=0;a.chart.type=c;e&&(a.chart.className="highcharts-no-background");
a.title={};a.title.text="";a.credits={};a.credits.enabled=!1;a.xAxis={};a.xAxis.visible=!1;a.yAxis={};a.yAxis.visible=!1;a.legend={};a.legend.enabled=!1;a.tooltip={};a.tooltip.enabled=!1;a.plotOptions={};a.plotOptions.series={};a.plotOptions.series.animation=!1;a.plotOptions.series.connectNulls=!0;a.plotOptions.series.enableMouseTracking=!1;a.plotOptions.series.lineWidth=1;a.plotOptions.series.shadow=!1;a.plotOptions.series.states={};a.plotOptions.series.states.hover={};a.plotOptions.series.states.hover.lineWidth=
1;a.plotOptions.series.marker={};a.plotOptions.series.marker.radius=0;a.plotOptions.series.marker.states={};a.plotOptions.series.marker.states.hover={};a.plotOptions.series.marker.states.hover.radius=2;""!=d&&(a.plotOptions.series.step=d);a.series=[];for(b=0;b<f.length;b++)a.series.push(f[b]);return a},IsDatetimeXAxis:function(a){return c(a)},Select:function(a,b){for(var c=[],e=0;e<a.Data.Rows.length;e++){var d=a.Data.Rows[e],f=!0;for(j=0;j<b.length;j++){var g=b[j];if(d[g.DataField]&&qv.util.trim(d[g.DataField])!=
qv.util.trim(g.Value)){f=!1;break}}f&&c.push(e)}if(0<c.length){e=a.Charts;for(d=0;d<e.length;d++)for(var f=e[d],g=!1,h=0;h<c.length;h++)for(var k=c[h],l=0;l<f.series.length;l++)f.series[l].points[k].select(!0,g),g||(g=!0)}else n(a.Charts)},Deselect:function(a){n(a.Charts)}}}();
qv.card=function(){function a(a,b){for(var c={},d=0;d<a.length;d++){var f=a[d],h;h=f;for(var l=b,m=[],p=[],q=0;q<l.length;q++){var z=l[q],k;"Count"==h.Aggregation?(k=0,z=parseFloat(z[h.DataField])):"Average"==h.Aggregation?(k=parseFloat(z[h.DataField+"_N"]),z=parseFloat(z[h.DataField+"_D"])):(k=parseFloat(z[h.DataField]),z=1);m.push(k);p.push(z)}h=qv.util.aggregate(h.Aggregation,m,p).toString();c[f.DataField]=h}return c}function c(a,b){if(0!=a.ConditionalStyles.length)for(var c=0;c<a.ConditionalStyles.length;c++){var d=
a.ConditionalStyles[c];if(qv.util.satisfyStyle(b,d))return qv.util.css.parseStyle(d.StyleOrClass)}return qv.util.css.parseStyle(a.Style)}function d(a,b,c,d){function f(a,b){var c=gx.date.now(),e;switch(a){case "LastYear":e=gx.date.addyr(c,-1);break;case "LastSemester":e=gx.date.addmth(c,-6);break;case "LastQuarter":e=gx.date.addmth(c,-3);break;case "LastMonth":e=gx.date.addmth(c,-1);break;case "LastWeek":e=gx.date.dtadd(c,-604800);break;case "LastDay":e=gx.date.dtadd(c,-86400);break;case "LastHour":e=
gx.date.dtadd(c,-3600);break;case "LastMinute":e=gx.date.dtadd(c,-60);break;case "LastSecond":e=gx.date.dtadd(c,-1)}return qv.util.dateToString(e,"datetime"==b)}var h={};if(a.IncludeTrend)if("SinceTheBeginning"==a.TrendPeriod||""==a.TrendPeriod)h=0;else for(var l=f(a.TrendPeriod,d),h=a.Data.Rows.length-1,m=a.Data.Rows.length-2;0<=m&&!(a.Data.Rows[m][c]<l);m--)h=m;else h=a.Data.Rows.length-1;return h=function(a,b,c,e,d,f){var g=null,h=null,l=null,n=null,m=[],s={AnyTrend:!1};if(""!=c){for(var t=d.length-
1,p=0,q=0,y=0,A=0,D=0,da=0,X=null,O=null;a<=t;a++)if(void 0!=d[a][c]&&void 0!=d[a][e]){var p=p+1,M=new gx.date.gxdate(d[a][c],"Y4MD"),L=parseFloat(d[a][e]);m.push({x:M.Value.getTime()-6E4*M.Value.getTimezoneOffset(),y:L});if(null==g&&null==h)h=g=L,l=d[a][c],n=d[a][c];else if(L>h&&(n=d[a][c],h=L),L<g)l=d[a][c],g=L;a>=b&&(null==X&&null==O&&(X=M,O=L),M="date"==f?gx.date.daysDiff(M,X):gx.date.secDiff(M,X),L-=O,q+=M,y+=L,A+=M*L,D+=M*M,da+=L*L)}s.AnyTrend=1<p;s.Slope=(p*A-q*y)/(p*D-q*q);s.Intercept=(y-
s.Slope*q)/p;s.R2=Math.pow((p*A-q*y)/Math.sqrt((p*D-q*q)*(p*da-y*y)),2)}b={};b.LinearRegression=s;b.MinValue=g;b.MinWhen=l;b.MaxValue=h;b.MaxWhen=n;b.ChartSeriesData=m;return b}(a.IncludeSparkline||a.IncludeMaxAndMin?0:h,h,c,b.DataField,a.Data.Rows,d)}function b(b,c,d,f){function h(a,b){function c(a,b,e){var d=[];if(e)for(e=0;e<b.length;e++)d.push(b[e][a]);else d.push(b[b.length-1][a]);return d}for(var e=[],d=0;d<a.Metadata.Axes.length;d++){var f={};f.Name=a.Metadata.Axes[d].Name;f.Values=c(a.Metadata.Axes[d].DataField,
a.Data.Rows,b);e.push(f)}for(d=0;d<a.Metadata.Data.length;d++)f={},f.Name=a.Metadata.Data[d].Name,f.Values=c(a.Metadata.Data[d].DataField,a.Data.Rows,b),e.push(f);return e}for(var l=null,m=0;m<c.Metadata.Data.length;m++)if(c.Metadata.Data[m].Name==d){l=c.Metadata.Data[m];break}null!=l&&(b.Name=l.Name,b.Axis="Data",d=f?a(c.Metadata.Data,c.Data.Rows):c.Data.Rows[c.Data.Rows.length-1],b.Value=d[l.DataField],b.Context=h(c,f))}function f(a,b){return a+"_card_sparkline_"+b}function p(a,b,c){c=f(a.userControlId(),
c);return qv.chart.getSparklineChartOptions(a,c,"line",!0,"",[{data:b}])}function m(a,b,c,d){var f={textAlign:"center",paddingTop:"0px",paddingRight:"5px",paddingBottom:"0px",paddingLeft:"5px"},a=qv.util.dom.createTable(a,"",{}),h;h=qv.util.dom.createRow(a);h=qv.util.dom.createCell(h,1,"",f,"");qv.util.dom.createSpan(h,"","qv-card-max-and-min-value",c,{},null,b);h=qv.util.dom.createRow(a);h=qv.util.dom.createCell(h,1,"",f,"");qv.util.dom.createSpan(h,"","qv-card-max-and-min-title",c,{},null,d);return a}
function h(a){var a=new gx.date.gxdate(a,"Y4MD"),b=gx.date.now(),a=gx.date.secDiff(b,a);return gx.getMessage("GXPL_QViewerTimeAgo").replace("{0}",qv.util.seconsdToText(a))}function l(a,b,c,d){""!=b?(d=qv.util.formatNumber(parseFloat(b),d,c.Picture,!1),b=qv.util.formatNumber(parseFloat(100*b/c.TargetValue),2,"ZZZZZZZZZZZZZZ9.99",!1)+"%"):b=d="";switch(a.ShowDataAs){case "Values":return d;case "Percentages":return b;case "ValuesAndPercentages":return d+" ("+b+")";default:return d}}function q(b){function g(a,
b,c){var c=0<c.LinearRegression.Slope?"qv-card-upward-trend":0>c.LinearRegression.Slope?"qv-card-downward-trend":"qv-card-sideward-trend",d;d=""==b.TrendPeriod?gx.getMessage("GXPL_QViewerSinceTheBeginningTrend"):gx.getMessage("GXPL_QViewer"+b.TrendPeriod+"Trend");var e={width:"16px",height:"16px"};b.IncludeSparkline?e.marginLeft="5px":e.marginRight="5px";return qv.util.dom.createDiv(a,"",c,d,e,"")}for(var s=0<b.Data.Rows.length,n=!0,q="",A,t=0;t<b.Metadata.Axes.length;t++){var D=b.Metadata.Axes[t];
if("date"==D.DataType||"datetime"==D.DataType){n=!1;q=D.DataField;A=D.DataType;break}}var x;s&&(x=n?a(b.Metadata.Data,b.Data.Rows):b.Data.Rows[b.Data.Rows.length-1]);var t=qv.util.dom.getEmptyContainer(b),t=qv.util.dom.createTable(t,qv.util.GetContainerControlClasses(b),{width:gx.dom.addUnits(b.Width),height:gx.dom.addUnits(b.Height)}),t=qv.util.dom.createRow(t),t=qv.util.dom.createCell(t,1,"center",{},""),H=qv.util.dom.createTable(t,"",{width:"Horizontal"==b.Orientation?"100%":"",height:"Vertical"==
b.Orientation?"100%":"",whiteSpace:"nowrap"}),z;"Horizontal"==b.Orientation&&(z=qv.util.dom.createRow(H));D=[];for(t=0;t<b.Metadata.Data.length;t++){var k=b.Metadata.Data[t],B=qv.util.ParseNumericPicture(k.DataType,k.Picture).DecimalPrecision,v,w,o;s?(v=x[k.DataField],w=l(b,x[k.DataField],k,B),o=h(x[q])):o=w=v="";if((gx.lang.gxBoolean(b.IncludeTrend)||gx.lang.gxBoolean(b.IncludeSparkline)||gx.lang.gxBoolean(b.IncludeMaxAndMin))&&s){var K=d(b,k,q,A);D.push(K)}var T=c(k,v);v={};var ca="qv-card-element-value";
qv.util.startsWith(T,"{")&&qv.util.endsWith(T,"}")?v=JSON.parse(T):ca=T;T=null;b.ItemClick&&(v.cursor="pointer",T=function(){qv.card.fireItemClickEvent(b,k.Name,n)});"Vertical"==b.Orientation&&(z=qv.util.dom.createRow(H));var N="",C="";t<b.Metadata.Data.length-1&&(N="Horizontal"==b.Orientation?"20px":"",C="Vertical"==b.Orientation?"20px":"");var N=qv.util.dom.createCell(z,1,"center",{paddingRight:N,paddingBottom:C},""),N=qv.util.dom.createTable(N,"",{}),C=qv.util.dom.createRow(N),C=qv.util.dom.createCell(C,
1,"center",{},""),C=qv.util.dom.createTable(C,"",{}),C=qv.util.dom.createRow(C),J=qv.util.dom.createCell(C,1,"",{},"");s&&(b.IncludeTrend&&!b.IncludeSparkline&&K.LinearRegression.AnyTrend)&&g(J,b,K);J=qv.util.dom.createCell(C,1,"center",{},"");qv.util.dom.createSpan(J,"",ca,""!=q?o:"",v,T,w);C=qv.util.dom.createRow(N);C=qv.util.dom.createCell(C,1,"center",{},"");span1=qv.util.dom.createSpan(C,"","qv-card-element-title",""!=q?o:"",{},null,k.Title);b.IncludeSparkline&&(""!=q&&s)&&(C=qv.util.dom.createRow(N),
C=qv.util.dom.createCell(C,1,"",{},""),C=qv.util.dom.createTable(C,"",{width:"100%"}),C=qv.util.dom.createRow(C),J=qv.util.dom.createCell(C,1,"",{width:"100%"},""),qv.util.dom.createDiv(J,f(b.userControlId(),t),"","",{height:"50px",width:"100%",minWidth:"100px"},""),J=qv.util.dom.createCell(C,1,"",{width:"0%"},""),s&&(b.IncludeTrend&&K.LinearRegression.AnyTrend)&&g(J,b,K));b.IncludeMaxAndMin&&(""!=q&&s)&&(C=qv.util.dom.createRow(N),C=qv.util.dom.createCell(C,1,"center",{},""),C=qv.util.dom.createTable(C,
"",{"margin-top":"10px"}),C=qv.util.dom.createRow(C),J=qv.util.dom.createCell(C,1,"",{},""),m(J,l(b,K.MinValue,k,B),h(K.MinWhen),gx.getMessage("GXPL_QViewerCardMinimum")),J=qv.util.dom.createCell(C,1,"",{},""),m(J,l(b,K.MaxValue,k,B),h(K.MaxWhen),gx.getMessage("GXPL_QViewerCardMaximum")))}if(b.IncludeSparkline&&""!=q&&s)for(t=0;t<b.Metadata.Data.length;t++)s=p(b,D[t].ChartSeriesData,t),new Highcharts.Chart(s);b._ControlRenderedTo=b.RealType;qv.util.hideActivityIndicator(b)}return{tryToRenderCard:function(a){var b=
"";(new Date).getTime();a.xml=a.xml||{};qv.services.GetRecordsetCacheKeyIfNeeded(a,function(a,c){var d=!1;a!=c.xml.recordsetCacheKey&&(c.xml.recordsetCacheKey=a,d=!0);qv.util.anyError(a)?(b=qv.util.getErrorFromText(a),qv.util.renderError(c,b)):(d&&qv.services.parseRecordsetCacheKeyXML(c),qv.services.GetMetadataIfNeeded(c,function(a,c){var d=false;if(a!=c.xml.metadata){c.xml.metadata=a;d=true}(new Date).getTime();if(qv.util.anyError(a)){b=qv.util.getErrorFromText(a);qv.util.renderError(c,b)}else{d&&
qv.services.parseMetadataXML(c);qv.services.GetDataIfNeeded(c,function(a,c){var d=false;if(a!=c.xml.data){c.xml.data=a;d=true}(new Date).getTime();if(qv.util.anyError(a)){b=qv.util.getErrorFromText(a);qv.util.renderError(c,b)}else{d&&qv.services.parseDataXML(c);q(c)}})}}))})},GetMetadataCard:function(a){return qv.util.GetDesigntimeMetadata(a)},GetDataCard:function(a){return a.xml.data},fireItemClickEvent:function(a,c,d){b(a.ItemClickData,a,c,d);a.ItemClick()}}}();
